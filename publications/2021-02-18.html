<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="ReSpec 26.0.1">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<style>
span.example-title{text-transform:none}
aside.example,div.example,div.illegal-example{padding:.5em;margin:1em 0;position:relative;clear:both}
div.illegal-example{color:red}
div.illegal-example p{color:#000}
aside.example,div.example{padding:.5em;border-left-width:.5em;border-left-style:solid;border-color:#e0cb52;background:#fcfaee}
aside.example div.example{border-left-width:.1em;border-color:#999;background:#fff}
aside.example div.example span.example-title{color:#999}
</style>
<style>
.issue-label{text-transform:initial}
.warning>p:first-child{margin-top:0}
.warning{padding:.5em;border-left-width:.5em;border-left-style:solid}
span.warning{padding:.1em .5em .15em}
.issue.closed span.issue-number{text-decoration:line-through}
.warning{border-color:#f11;border-width:.2em;border-style:solid;background:#fbe9e9}
.warning-title:before{content:"⚠";font-size:1.3em;float:left;padding-right:.3em;margin-top:-.3em}
li.task-list-item{list-style:none}
input.task-list-item-checkbox{margin:0 .35em .25em -1.6em;vertical-align:middle}
.issue a.respec-gh-label{padding:5px;margin:0 2px 0 2px;font-size:10px;text-transform:none;text-decoration:none;font-weight:700;border-radius:4px;position:relative;bottom:2px;border:none;display:inline-block}
</style>
<style>
dfn{cursor:pointer}
.dfn-panel{position:absolute;z-index:35;min-width:300px;max-width:500px;padding:.5em .75em;margin-top:.6em;font:small Helvetica Neue,sans-serif,Droid Sans Fallback;background:#fff;color:#000;box-shadow:0 1em 3em -.4em rgba(0,0,0,.3),0 0 1px 1px rgba(0,0,0,.05);border-radius:2px}
.dfn-panel:not(.docked)>.caret{position:absolute;top:-9px}
.dfn-panel:not(.docked)>.caret::after,.dfn-panel:not(.docked)>.caret::before{content:"";position:absolute;border:10px solid transparent;border-top:0;border-bottom:10px solid #fff;top:0}
.dfn-panel:not(.docked)>.caret::before{border-bottom:9px solid #a2a9b1}
.dfn-panel *{margin:0}
.dfn-panel b{display:block;color:#000;margin-top:.25em}
.dfn-panel ul a[href]{color:#333}
.dfn-panel>div{display:flex}
.dfn-panel a.self-link{font-weight:700;margin-right:auto}
.dfn-panel .marker{padding:.1em;margin-left:.5em;border-radius:0.2em;text-align:center;white-space:nowrap;font-size:90%;color:#040b1c}
.dfn-panel .marker.dfn-exported{background:#d1edfd;box-shadow:0 0 0 .125em #1ca5f940}
.dfn-panel .marker.idl-block{background:#8ccbf2;box-shadow:0 0 0 .125em #0670b161}
.dfn-panel a:not(:hover){text-decoration:none!important;border-bottom:none!important}
.dfn-panel a[href]:hover{border-bottom-width:1px}
.dfn-panel ul{padding:0}
.dfn-panel li{margin-left:1em}
.dfn-panel.docked{position:fixed;left:.5em;top:unset;bottom:2em;margin:0 auto;max-width:calc(100vw - .75em * 2 - .5em - .2em * 2);max-height:30vh;overflow:auto}
</style>

<title>JSON-LD-star</title>





<script>
  document.addEventListener("DOMContentLoaded", () => {
    // Add example button selection logic
    for (const button of document.querySelectorAll(".ds-selector-tabs .selectors button")) {
      button.onclick = () => {
        const ex = button.closest(".ds-selector-tabs");
        ex.querySelector("button.selected").classList.remove("selected");
        ex.querySelector(".selected").classList.remove("selected");
        button.classList.add('selected');
        ex.querySelector("." + button.dataset.selects).classList.add("selected");
      }
    }

    // Toggle show/hide changes
    for (const elem of document.querySelectorAll(".show-changes")) {
      elem.onclick = () => {
        if (elem.classList.contains("selected")) {
          // Remove highlight class from elements having "changed" class
          elem.classList.remove("selected");
          for (const changed of document.querySelectorAll(".changed")) {
            changed.classList.remove("highlight");
          }
        } else {
          // Add highlight class to elements having "changed" class
          elem.classList.add("selected");
          for (const changed of document.querySelectorAll(".changed")) {
            changed.classList.add("highlight");
          }
        }
      }
    }
  });
</script>

<style>

  .hidden { display: none;}
  .hl-bold { font-weight: bold; color: #0a3; }
  .comment { color: #999; }
  table, thead, tr, td { padding: 5px; border-width: 1px; border-spacing: 0px; border-style: solid; border-collapse: collapse; }
  table.example {width: 100%;}
  .example > pre.context:before {
    content: "Context";
    float: right;
    font: x-large Arial, sans-serif;
    color: gray;
    border: solid thin black;
    padding: 0.2em;
  }
  .example > pre.frame:before {
    content: "Frame";
    float: right;
    font: x-large Arial, sans-serif;
    color: gray;
    border: solid thin black;
    padding: 0.2em;
  }
  .example > pre.input:before {
    content: "Input";
    float: right;
    font: x-large Arial, sans-serif;
    color: gray;
    border: solid thin black;
    padding: 0.2em;
  }
  .example > pre.result:before {
    content: "Result";
    float: right;
    font: x-large Arial, sans-serif;
    color: gray;
    border: solid thin black;
    padding: 0.2em;
  }
  .example > pre.flattened:before {
    content: "Flattened";
    float: right;
    font: x-large Arial, sans-serif;
    color: gray;
    border: solid thin black;
    padding: 0.2em;
  }
  .example > pre.expanded:before {
    content: "Expanded";
    float: right;
    font: x-large Arial, sans-serif;
    color: gray;
    border: solid thin black;
    padding: 0.2em;
  }
  .example > pre.turtle:before {
    content: "Turtle";
    float: right;
    font: x-large Arial, sans-serif;
    color: gray;
    border: solid thin black;
    padding: 0.2em;
  }
  aside.example {
    overflow-y: hidden;
  }
  /* example tab selection */
  .ds-selector-tabs {
    padding-bottom: 2em;
  }
  .ds-selector-tabs .selectors {
    padding: 0;
    border-bottom: 1px solid #ccc;
    height: 28px;
  }
  .ds-selector-tabs .selectors button {
    display: inline-block;
    min-width: 54px;
    text-align: center;
    font-size: 11px;
    font-weight: bold;
    height: 27px;
    padding: 0 8px;
    line-height: 27px;
    transition: all,0.218s;
    border-top-right-radius: 2px;
    border-top-left-radius: 2px;
    color: #666;
    border: 1px solid transparent;
  }
  .ds-selector-tabs .selectors button:first-child {
    margin-left: 2px;
  }
  .ds-selector-tabs .selectors button.selected {
    color: #202020 !important;
    border: 1px solid #ccc;
    border-bottom: 1px solid #fff !important;
  }
  .ds-selector-tabs .selectors button:hover {
    background-color: transparent;
    color: #202020;
    cursor: pointer;
  }
  .ds-selector-tabs pre:not(.preserve), .ds-selector-tabs table:not(.preserve) {
    display: none;
  }
  .ds-selector-tabs pre.selected, .ds-selector-tabs table.selected {
    display: block;
  }
  a.playground {
    display: inline-block;
    width: 150px;
    border: 1px solid transparent;
    border-top-right-radius: 2px;
    border-top-left-radius: 2px;
    background-color: rgb(192, 192, 192);
    text-decoration: none;
    font-size: 13px;
    margin-bottom: 10px;
  }
  a[href].playground {
    padding: 4px 0 3px 8px;
    border-bottom: none;
    text-decoration: none;
    color: #666;
  }
  .algorithm ol {
    counter-reset: numsection;
    list-style-type: none;
  }
  .algorithm ol>li {
    margin: 0.5em 0;
  }
  .algorithm ol>li:before {
    font-weight: bold;
    counter-increment: numsection;
    content: counters(numsection, ".") ") ";
  }

</style>

<style id="respec-mainstyle">
@keyframes pop{
0%{transform:scale(1,1)}
25%{transform:scale(1.25,1.25);opacity:.75}
100%{transform:scale(1,1)}
}
.hljs{background:0 0!important}
a abbr,h1 abbr,h2 abbr,h3 abbr,h4 abbr,h5 abbr,h6 abbr{border:none}
dfn{font-weight:700}
a.internalDFN{color:inherit;border-bottom:1px solid #99c;text-decoration:none}
a.externalDFN{color:inherit;border-bottom:1px dotted #ccc;text-decoration:none}
a.bibref{text-decoration:none}
.respec-offending-element:target{animation:pop 0.25s ease-in-out 0s 1}
.respec-offending-element,a[href].respec-offending-element{text-decoration:red wavy underline}
@supports not (text-decoration:red wavy underline){
.respec-offending-element:not(pre){display:inline-block}
.respec-offending-element{background:url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x}
}
#references :target{background:#eaf3ff;animation:pop 0.4s ease-in-out 0s 1}
cite .bibref{font-style:normal}
code{color:#c63501}
th code{color:inherit}
a[href].orcid{padding-left:4px;padding-right:4px}
a[href].orcid>svg{margin-bottom:-2px}
.toc a,.tof a{text-decoration:none}
a .figno,a .secno{color:#000}
ol.tof,ul.tof{list-style:none outside none}
.caption{margin-top:.5em;font-style:italic}
table.simple{border-spacing:0;border-collapse:collapse;border-bottom:3px solid #005a9c}
.simple th{background:#005a9c;color:#fff;padding:3px 5px;text-align:left}
.simple th a{color:#fff;padding:3px 5px;text-align:left}
.simple th[scope=row]{background:inherit;color:inherit;border-top:1px solid #ddd}
.simple td{padding:3px 10px;border-top:1px solid #ddd}
.simple tr:nth-child(even){background:#f0f6ff}
.section dd>p:first-child{margin-top:0}
.section dd>p:last-child{margin-bottom:0}
.section dd{margin-bottom:1em}
.section dl.attrs dd,.section dl.eldef dd{margin-bottom:0}
#issue-summary>ul{column-count:2}
#issue-summary li{list-style:none;display:inline-block}
details.respec-tests-details{margin-left:1em;display:inline-block;vertical-align:top}
details.respec-tests-details>*{padding-right:2em}
details.respec-tests-details[open]{z-index:999999;position:absolute;border:thin solid #cad3e2;border-radius:0.3em;background-color:#fff;padding-bottom:0.5em}
details.respec-tests-details[open]>summary{border-bottom:thin solid #cad3e2;padding-left:1em;margin-bottom:1em;line-height:2em}
details.respec-tests-details>ul{width:100%;margin-top:-.3em}
details.respec-tests-details>li{padding-left:1em}
a[href].self-link:hover{opacity:1;text-decoration:none;background-color:transparent}
h2,h3,h4,h5,h6{position:relative}
aside.example .marker>a.self-link{color:inherit}
h2>a.self-link,h3>a.self-link,h4>a.self-link,h5>a.self-link,h6>a.self-link{border:none;color:inherit;font-size:83%;height:2em;left:-1.6em;opacity:.5;position:absolute;text-align:center;text-decoration:none;top:0;transition:opacity .2s;width:2em}
h2>a.self-link::before,h3>a.self-link::before,h4>a.self-link::before,h5>a.self-link::before,h6>a.self-link::before{content:"§";display:block}
@media (max-width:767px){
dd{margin-left:0}
h2>a.self-link,h3>a.self-link,h4>a.self-link,h5>a.self-link,h6>a.self-link{left:auto;top:auto}
}
@media print{
.removeOnSave{display:none}
}
</style>
<meta name="description" content="This NOTE describes an extension to [JSON-LD11], [JSON-LD11-API],
        and [JSON-LD11-FRAMING] to allow arcs in a Linked Data Graph to
        be annotated using the [RDFStar] model.">
<style>
.hljs{display:block;overflow-x:auto;padding:.5em;color:#383a42;background:#fafafa}
.hljs-comment,.hljs-quote{color:#717277;font-style:italic}
.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}
.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#ca4706;font-weight:700}
.hljs-literal{color:#0b76c5}
.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#42803c}
.hljs-built_in,.hljs-class .hljs-title{color:#9a6a01}
.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}
.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#336ae3}
.hljs-emphasis{font-style:italic}
.hljs-strong{font-weight:700}
.hljs-link{text-decoration:underline}
</style>
<style>
var{position:relative;cursor:pointer}
var[data-type]::after,var[data-type]::before{position:absolute;left:50%;top:-6px;opacity:0;transition:opacity .4s;pointer-events:none}
var[data-type]::before{content:"";transform:translateX(-50%);border-width:4px 6px 0 6px;border-style:solid;border-color:transparent;border-top-color:#000}
var[data-type]::after{content:attr(data-type);transform:translateX(-50%) translateY(-100%);background:#000;text-align:center;font-family:"Dank Mono","Fira Code",monospace;font-style:normal;padding:6px;border-radius:3px;color:#daca88;text-indent:0;font-weight:400}
var[data-type]:hover::after,var[data-type]:hover::before{opacity:1}
</style>
<script id="initialUserConfig" type="application/json">{
  "localBiblio": {
    "RDFStar": {
      "title": "RDF-star and SPARQL-star",
      "authors": [
        "Olaf Hartig",
        "Pierre-Antoine Champin"
      ],
      "publisher": "W3C",
      "status": "W3C CG Draft",
      "href": "https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html",
      "editors": [
        "Olaf Hartig",
        "Pierre-Antoine Champin"
      ],
      "date": "2021-02-18",
      "id": "rdfstar"
    },
    "JSON-LD-star-tests": {
      "title": "JSON-LD-star Test Suite",
      "author": "Gregg Kellogg",
      "publisher": "W3C",
      "status": "unofficial",
      "href": "https://json-ld.github.io/json-ld-star/tests/",
      "id": "json-ld-star-tests"
    }
  },
  "specStatus": "CG-DRAFT",
  "copyrightStart": "2020",
  "shortName": "json-ld-star",
  "edDraftURI": "https://json-ld.github.io/json-ld-star/",
  "testSuiteURI": "https://json-ld.github.io/json-ld-star/tests/",
  "implementationReportURI": "https://json-ld.github.io/json-ld-star/reports/",
  "github": "https://github.com/json-ld/json-ld-star/",
  "doJsonLd": true,
  "editors": [
    {
      "name": "Gregg Kellogg",
      "url": "http://greggkellogg.net/",
      "w3cid": "44770"
    },
    {
      "name": "Pierre-Antoine Champin",
      "url": "http://champin.net/",
      "company": "ERCIM",
      "companyURL": "https://www.ercim.eu/",
      "w3cid": 42931,
      "orcid": "https://orcid.org/0000-0001-7046-4474"
    }
  ],
  "xref": [
    "json-ld11",
    "json-ld11-api",
    "json-ld11-framing"
  ],
  "group": "cg/json-ld",
  "wgPublicList": "public-linked-json",
  "maxTocLevel": 4,
  "noRecTrack": "true",
  "publishISODate": "2021-02-18T00:00:00.000Z",
  "generatedSubtitle": "Draft Community Group Report 18 February 2021"
}</script>
<link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/cg-draft"></head>
  <body class="h-entry" data-cite="json-ld11 json-ld11-api json-ld11-framing"><div class="head">
    <a class="logo" href="https://www.w3.org/"><img alt="W3C" width="72" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C"></a> <h1 id="title" class="title">JSON-LD-star</h1>
    
    <h2>
      Draft Community Group Report
      <time class="dt-published" datetime="2021-02-18">18 February 2021</time>
    </h2>
    <dl>
      
      
      <dt>Latest editor's draft:</dt><dd><a href="https://json-ld.github.io/json-ld-star/">https://json-ld.github.io/json-ld-star/</a></dd>
      <dt>Test suite:</dt><dd><a href="https://json-ld.github.io/json-ld-star/tests/">https://json-ld.github.io/json-ld-star/tests/</a></dd>
      <dt>Implementation report:</dt><dd>
              <a href="https://json-ld.github.io/json-ld-star/reports/">https://json-ld.github.io/json-ld-star/reports/</a>
            </dd>
      
      
      <dt>Editors:</dt>
      <dd class="p-author h-card vcard" data-editor-id="44770"><a class="u-url url p-name fn" href="http://greggkellogg.net/">Gregg Kellogg</a></dd><dd class="p-author h-card vcard" data-editor-id="42931"><a class="u-url url p-name fn" href="http://champin.net/">Pierre-Antoine Champin</a><a class="p-name orcid" href="https://orcid.org/0000-0001-7046-4474"><svg width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256">
  <style>

    .st1 {
      fill: #fff;
    }
  
</style>
  <path d="M256 128c0 70.7-57.3 128-128 128S0 198.7 0 128 57.3 0 128 0s128 57.3 128 128z" fill="#a6ce39"></path>
  <path class="st1" d="M86.3 186.2H70.9V79.1h15.4v107.1zM108.9 79.1h41.6c39.6 0 57 28.3 57 53.6 0 27.5-21.5 53.6-56.8 53.6h-41.8V79.1zm15.4 93.3h24.5c34.9 0 42.9-26.5 42.9-39.7C191.7 111.2 178 93 148 93h-23.7v79.4zM88.7 56.8c0 5.5-4.5 10.1-10.1 10.1s-10.1-4.6-10.1-10.1c0-5.6 4.5-10.1 10.1-10.1s10.1 4.6 10.1 10.1z"></path>
</svg>
        </a>
            (<a class="p-org org h-org h-card" href="https://www.ercim.eu/">ERCIM</a>)
          </dd>
      
      
      <dt>Participate:</dt><dd>
    <a href="https://github.com/json-ld/json-ld-star/">GitHub json-ld/json-ld-star</a>
  </dd><dd>
    <a href="https://github.com/json-ld/json-ld-star/issues/">File a bug</a>
  </dd><dd>
    <a href="https://github.com/json-ld/json-ld-star/commits/gh-pages">Commit history</a>
  </dd><dd>
    <a href="https://github.com/json-ld/json-ld-star/pulls/">Pull requests</a>
  </dd>
    </dl>
    
    <p class="copyright">
          <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>
          ©
          2020-2021
          
          the Contributors to the JSON-LD-star
          Specification, published by the
          <a href="https://www.w3.org/community/json-ld/">JSON for Linking Data Community Group</a> under the
          <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>. A human-readable
                <a href="https://www.w3.org/community/about/agreements/cla-deed/">summary</a>
                is available.
              
        </p>
    <hr title="Separator for header">
  </div>
    <section id="abstract" class="introductory"><h2>Abstract</h2>
      <p>
        This NOTE describes an extension to [<cite><a class="bibref" data-link-type="biblio" href="#bib-json-ld11" title="JSON-LD 1.1">JSON-LD11</a></cite>], [<cite><a class="bibref" data-link-type="biblio" href="#bib-json-ld11-api" title="JSON-LD 1.1 Processing Algorithms and API">JSON-LD11-API</a></cite>],
        and [<cite><a class="bibref" data-link-type="biblio" href="#bib-json-ld11-framing" title="JSON-LD 1.1 Framing">JSON-LD11-FRAMING</a></cite>] to allow arcs in a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">Linked Data Graph</a> to
        be annotated using the [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdfstar" title="RDF-star and SPARQL-star">RDFStar</a></cite>] model.
      </p>
    </section>

    <section id="sotd" class="introductory"><h2>Status of This Document</h2><p>
      This specification was published by the
      <a href="https://www.w3.org/community/json-ld/">JSON for Linking Data Community Group</a>. It is not a W3C Standard nor is it
      on the W3C Standards Track.
      
            Please note that under the
            <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>
            there is a limited opt-out and other conditions apply.
          
      Learn more about
      <a href="https://www.w3.org/community/">W3C Community and Business Groups</a>.
    </p>
      <p>
        This is an unofficial proposal.
      </p>
    <p>
    <a href="https://github.com/json-ld/json-ld-star/issues/">GitHub Issues</a> are preferred for
          discussion of this specification.
        
    Alternatively, you can send comments to our mailing list.
          Please send them to
          <a href="mailto:public-linked-json@w3.org">public-linked-json@w3.org</a>
          (<a href="mailto:public-linked-json-request@w3.org?subject=subscribe">subscribe</a>,
          <a href="https://lists.w3.org/Archives/Public/public-linked-json/">archives</a>).
        
  </p></section><nav id="toc"><h2 class="introductory" id="table-of-contents">Table of Contents</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>Introduction</a></li><li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">2. </bdi>Conformance</a></li><li class="tocline"><a class="tocxref" href="#json-ld-star-specific-terms"><bdi class="secno">3. </bdi>JSON-LD-star-specific Terms</a></li><li class="tocline"><a class="tocxref" href="#basic-concepts"><bdi class="secno">4. </bdi>Basic Concepts</a></li><li class="tocline"><a class="tocxref" href="#advanced-concepts"><bdi class="secno">5. </bdi>Advanced Concepts</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#reverse-properties"><bdi class="secno">5.1 </bdi>Reverse Properties</a></li><li class="tocline"><a class="tocxref" href="#deep-embedding"><bdi class="secno">5.2 </bdi>Deep Embedding</a></li><li class="tocline"><a class="tocxref" href="#mixing-annotations-and-embedded-nodes"><bdi class="secno">5.3 </bdi>Mixing Annotations and Embedded Nodes</a></li></ol></li><li class="tocline"><a class="tocxref" href="#data-model"><bdi class="secno">6. </bdi>Data Model</a></li><li class="tocline"><a class="tocxref" href="#grammar-extensions"><bdi class="secno">7. </bdi>Grammar Extensions</a></li><li class="tocline"><a class="tocxref" href="#algorithmic-extensions"><bdi class="secno">8. </bdi>Algorithmic Extensions</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#expansion-algorithm"><bdi class="secno">8.1 </bdi>Expansion Algorithm</a></li><li class="tocline"><a class="tocxref" href="#compaction-algorithm"><bdi class="secno">8.2 </bdi>Compaction Algorithm</a></li><li class="tocline"><a class="tocxref" href="#flattening-algorithms"><bdi class="secno">8.3 </bdi>Flattening Algorithms</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#flattening-algorithm"><bdi class="secno">8.3.1 </bdi>Flattening Algorithm</a></li><li class="tocline"><a class="tocxref" href="#node-map-generation"><bdi class="secno">8.3.2 </bdi>Node Map Generation</a></li><li class="tocline"><a class="tocxref" href="#rename-blank-nodes"><bdi class="secno">8.3.3 </bdi>Rename Blank Nodes</a></li><li class="tocline"><a class="tocxref" href="#create-annotations"><bdi class="secno">8.3.4 </bdi>Create Annotations</a></li></ol></li><li class="tocline"><a class="tocxref" href="#rdf-serialization-deserialization-algorithms"><bdi class="secno">8.4 </bdi>RDF Serialization/Deserialization Algorithms</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#deserialize-json-ld-to-rdf-algorithm"><bdi class="secno">8.4.1 </bdi>Deserialize JSON-LD to RDF Algorithm</a></li><li class="tocline"><a class="tocxref" href="#object-to-rdf-algorithm"><bdi class="secno">8.4.2 </bdi>Object to RDF Algorithm</a></li><li class="tocline"><a class="tocxref" href="#serialize-rdf-as-json-ld"><bdi class="secno">8.4.3 </bdi>Serialize RDF as JSON-LD Algorithm</a></li><li class="tocline"><a class="tocxref" href="#rdf-to-object-conversion"><bdi class="secno">8.4.4 </bdi>RDF to Object Conversion</a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">A. </bdi>References</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">A.1 </bdi>Normative references</a></li><li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">A.2 </bdi>Informative references</a></li></ol></li></ol></nav>

    <section id="introduction">
      <h2 id="x1-introduction"><bdi class="secno">1. </bdi>Introduction<a class="self-link" aria-label="§" href="#introduction"></a></h2>
      <p><cite><a href="https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html">RDF-star and SPARQL-star</a></cite> [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdfstar" title="RDF-star and SPARQL-star">RDFStar</a></cite>] addresses the problem of annotating arcs in a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">Linked Data Graph</a>
        by extending the <a href="https://www.w3.org/TR/rdf11-concepts/#data-model">RDF data model</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf11-concepts" title="RDF 1.1 Concepts and Abstract Syntax">RDF11-CONCEPTS</a></cite>] to allow for triples
        to be used as the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-subject">subject</a>
        or <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-object">object</a> of another <a href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple">RDF triple</a>.
        This note describes an update to the <a href="https://www.w3.org/TR/json-ld11/#data-model">JSON-LD data model</a>
        to allow limited form of a <a href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a>
        to use another <a href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a> as its node identifier.</p>

      <p>The two popular graph-based data models have been RDF [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf11-concepts" title="RDF 1.1 Concepts and Abstract Syntax">RDF11-CONCEPTS</a></cite>] and
        <dfn href="https://en.wikipedia.org/wiki/Graph_database#Labeled-property_graph" data-lt="Property Graph|Labeled-property Graphs" id="dfn-property-graph">Labeled-property Graphs</dfn>,
        which are roughly similar, with the RDF model being more formal in identifying nodes,
        datatypes and relationships, while Property Graphs
        use a less formal relationship model somewhat similar to JSON. In both models,
        nodes are related via edges (AKA arcs), but in Property Graphs,
        those edges may themselves be annotated with properties.
        This is useful in providing additional metadata and semantics to relationships of the nodes.</p>

      <p>Historically, in RDF, this can be simulated through <a href="https://www.w3.org/wiki/RdfReification">Reification</a>,
        where a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple">triple</a> is represented by another resource with properties for the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-subject">subject</a>, <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-predicate">predicate</a>, and <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-object">object</a>,
        which allows additional properties to be asserted on that reification node.</p>

      <div class="example" id="example-1-an-rdf-triple-and-its-reification">
        <div class="marker">
    <a class="self-link" href="#example-1-an-rdf-triple-and-its-reification">Example<bdi> 1</bdi></a><span class="example-title">: An RDF Triple and its Reification</span>
  </div> <pre class="turtle" data-content-type="text/turtle" aria-busy="false"><code class="hljs">@base &lt;http://example.org/&gt; .
@prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .
@prefix : &lt;#&gt; .

:bob :age 42 .

# Reification of previous triple
[
  a rdf:Statement;
  rdf:subject :bob;
  rdf:predicate :age;
  rdf:object 42
] .</code></pre>
      </div>

      <p>In [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdfstar" title="RDF-star and SPARQL-star">RDFStar</a></cite>], a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple">triple</a> may act as the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-subject">subject</a> or <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-object">object</a> in another <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple">triple</a>,
        for example, we can modify how certain we are about a relationship as follows:</p>

      <div class="example" id="example-2-annotation-on-an-rdf-triple">
        <div class="marker">
    <a class="self-link" href="#example-2-annotation-on-an-rdf-triple">Example<bdi> 2</bdi></a><span class="example-title">: Annotation on an RDF triple</span>
  </div> <pre class="turtle" data-content-type="text/turtle" data-options="rdfstar=true" aria-busy="false"><code class="hljs">@base &lt;http://example.org/&gt; .
@prefix : &lt;#&gt; .

:bob :age 42.
&lt;&lt; :bob :age 42 &gt;&gt; :source &lt;http://example.org/~bob/&gt;.</code></pre>
      </div>

      <p>This NOTE explores an extension of JSON-LD which can allow
        the value of an <code>@id</code> property to be an <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-1">embedded node</a>,
        and the description of an <a href="#dfn-annotation-object" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-annotation-object-1">annotation object</a> which serves as
        a short-hand when the annotated value also is described
        directly in the graph.</p>
    </section>

  <div class="informative hidden">
    
    <div><section><h2 id="terms-imported-from-other-specifications">Terms imported from Other Specifications<a class="self-link" aria-label="§" href="#terms-imported-from-other-specifications"></a></h2>
<p>Terms imported from <cite><a href="https://tc39.es/ecma262/">ECMAScript Language Specification</a></cite> [<cite><a class="bibref" data-link-type="biblio" href="#bib-ecmascript" title="ECMAScript Language Specification">ECMASCRIPT</a></cite>], <cite><a href="https://tools.ietf.org/html/rfc8259">The JavaScript Object Notation (JSON) Data Interchange Format</a></cite> [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8259" title="The JavaScript Object Notation (JSON) Data Interchange Format">RFC8259</a></cite>], <cite><a href="https://infra.spec.whatwg.org/">Infra Standard</a></cite> [<cite><a class="bibref" data-link-type="biblio" href="#bib-infra" title="Infra Standard">INFRA</a></cite>], and <cite><a href="https://heycam.github.io/webidl/">Web IDL</a></cite> [<cite><a class="bibref" data-link-type="biblio" href="#bib-webidl" title="Web IDL">WEBIDL</a></cite>]</p>
<dl class="termlist" data-sort=""><dt><dfn class="preserve" data-plurals="arrays" id="dfn-array" data-no-export=""><a href="https://infra.spec.whatwg.org/#list">array</a></dfn></dt><dd>
    In the JSON serialization,
    an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list">array</a> structure is represented as square brackets surrounding zero or more values.
    Values are separated by commas.
    In the <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11-api/#dfn-internal-representation">internal representation</a>,
    a <a data-ld="array" data-link-type="dfn" href="https://www.w3.org/TR/rdf-schema/#ch_collectionvocab">list</a> (also called an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list">array</a>) is an <em>ordered</em> collection of zero or more values.
    While JSON-LD uses the same array representation as JSON,
    the collection is <em>unordered</em> by default.
    While order is preserved in regular JSON arrays,
    it is not in regular JSON-LD arrays unless specifically defined
    (see the <a href="https://www.w3.org/TR/json-ld11/#sets-and-lists">Sets and Lists</a> section of JSON-LD 1.1.</dd>
  <dt><dfn class="preserve" data-plurals="booleans" id="dfn-boolean" data-no-export=""><a href="https://infra.spec.whatwg.org/#boolean">boolean</a></dfn></dt><dd>
    The values <code>true</code> and <code>false</code> that are used
    to express one of two possible states.</dd>
  <dt><dfn class="preserve" id="dfn-json-object" data-no-export=""><a href="https://tools.ietf.org/html/rfc8259#section-4">JSON object</a></dfn></dt><dd>
    In the JSON serialization,
    an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-object">object</a> structure
    is represented as a pair of curly brackets surrounding zero or more name/value pairs (or members).
    A name is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#javascript-string">string</a>.
    A single colon comes after each name,
    separating the name from the value.
    A single comma separates a value from a following name.
    In JSON-LD the names in an object must be unique.
    <p>In the <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11-api/#dfn-internal-representation">internal representation</a> a <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc8259#section-4">JSON object</a> is described as a
      <dfn class="preserve" data-plurals="maps" id="dfn-map" data-no-export=""><a href="https://infra.spec.whatwg.org/#ordered-map">map</a></dfn> (see [<cite><a class="bibref" data-link-type="biblio" href="#bib-infra" title="Infra Standard">INFRA</a></cite>]),
      composed of <dfn data-lt="map entry|entry|entries" data-ld-nodefault="" class="preserve" data-plurals="map entries" id="dfn-map-entry" data-no-export=""><a href="https://infra.spec.whatwg.org/#map-entry">entries</a></dfn> with key/value pairs.</p>
    <p>In the <a href="https://www.w3.org/TR/json-ld11-api/#the-application-programming-interface">Application Programming Interface</a>,
      a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a> is described using a [<cite><a class="bibref" data-link-type="biblio" href="#bib-webidl" title="Web IDL">WEBIDL</a></cite>] <a href="https://heycam.github.io/webidl/#idl-record">record</a>.</p></dd>
  <dt><dfn class="preserve" id="dfn-null" data-no-export=""><a href="https://infra.spec.whatwg.org/#nulls">null</a></dfn></dt><dd>
    The use of the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#nulls">null</a> value within JSON-LD
    is used to ignore or reset values.
    A <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">map entry</a> in the <code>@context</code> where the value,
    or the <code>@id</code> of the value, is <code>null</code>,
    explicitly decouples a term's association with an <abbr title="Internationalized Resource Identifier">IRI</abbr>.
    A <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">map entry</a> in the body of a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-json-ld-document">JSON-LD document</a>
    whose value is <code>null</code>
    has the same meaning as if the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">map entry</a> was not defined.
    If <code>@value</code>, <code>@list</code>, or <code>@set</code> is set to <code>null</code> in expanded form,
    then the entire <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc8259#section-4">JSON object</a> is ignored.</dd>
  <dt><dfn data-lt="number|JSON number" class="preserve" data-plurals="numbers" id="dfn-number" data-no-export=""><a href="https://tc39.es/ecma262/#sec-terms-and-definitions-number-value">number</a></dfn></dt><dd>
    In the JSON serialization, a <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-terms-and-definitions-number-value">number</a>
    is similar to that used in most programming languages,
    except that the octal and hexadecimal formats are not used and that leading zeros are not allowed.
    In the <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11-api/#dfn-internal-representation">internal representation</a>,
    a <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-terms-and-definitions-number-value">number</a> is equivalent to either a <dfn class="preserve" id="dfn-long" data-no-export=""><a href="https://heycam.github.io/webidl/#idl-long">long</a></dfn>
    or <dfn class="preserve" id="dfn-double" data-no-export=""><a href="https://heycam.github.io/webidl/#idl-double">double</a></dfn>,
    depending on if the number has a non-zero fractional part (see [<cite><a class="bibref" data-link-type="biblio" href="#bib-webidl" title="Web IDL">WEBIDL</a></cite>]).</dd>
  <dt><dfn class="preserve" id="dfn-scalar" data-no-export=""><a href="https://infra.spec.whatwg.org/#primitive-data-types">scalar</a></dfn></dt><dd>
    A scalar is either a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#javascript-string">string</a>, <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-terms-and-definitions-number-value">number</a>, <code>true</code>, or <code>false</code>.</dd>
  <dt><dfn class="preserve" data-plurals="strings" id="dfn-string" data-no-export=""><a href="https://infra.spec.whatwg.org/#javascript-string">string</a></dfn></dt><dd>
    A <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#javascript-string">string</a>
    is a sequence of zero or more Unicode (UTF-8) characters,
    wrapped in double quotes, using backslash escapes (if necessary).
    A character is represented as a single character string.</dd></dl>

<p>Terms imported from <cite><a href="https://tools.ietf.org/html/rfc3987">Internationalized Resource Identifiers (IRIs)</a></cite> [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc3987" title="Internationalized Resource Identifiers (IRIs)">RFC3987</a></cite>]</p>
<dl class="termlist" data-sort=""><dt><dfn data-lt="Internationalized Resource Identifier|IRI" class="preserve" data-plurals="iris" id="dfn-internationalized-resource-identifier" data-no-export=""><a href="https://tools.ietf.org/html/rfc3987#section-2"><abbr title="Internationalized Resource Identifier">IRI</abbr></a></dfn></dt><dd>
    The absolute form of an <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2"><abbr title="Internationalized Resource Identifier">IRI</abbr></a> containing a <em>scheme</em> along with a <em>path</em>
    and optional <em>query</em> and <em>fragment</em> segments.</dd>
  <dt><dfn class="preserve" id="dfn-iri-reference" data-no-export=""><a href="https://tools.ietf.org/html/rfc3987#section-1.3"><abbr title="Internationalized Resource Identifier">IRI</abbr> reference</a></dfn></dt><dd>
    Denotes the common usage of an <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2">Internationalized Resource Identifier</a>.
    An <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-1.3"><abbr title="Internationalized Resource Identifier">IRI</abbr> reference</a> may be absolute or
    <a data-lt="relative IRI reference" data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-6.5">relative</a>.
    However, the "<abbr title="Internationalized Resource Identifier">IRI</abbr>" that results from such a reference only includes absolute <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2">IRIs</a>;
    any <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-6.5">relative <abbr title="Internationalized Resource Identifier">IRI</abbr> references</a> are resolved to their absolute form.</dd>
  <dt><dfn class="preserve" data-plurals="relative iri references" id="dfn-relative-iri-reference" data-no-export=""><a href="https://tools.ietf.org/html/rfc3987#section-6.5">relative <abbr title="Internationalized Resource Identifier">IRI</abbr> reference</a></dfn></dt><dd>
    A relative <abbr title="Internationalized Resource Identifier">IRI</abbr> reference is an <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-1.3"><abbr title="Internationalized Resource Identifier">IRI</abbr> reference</a> that is relative to some other <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2"><abbr title="Internationalized Resource Identifier">IRI</abbr></a>,
    typically the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-base-iri">base <abbr title="Internationalized Resource Identifier">IRI</abbr></a> of the document.
    Note that <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-property">properties</a>,
    values of <code>@type</code>,
    and values of <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-term">terms</a> defined to be <em>vocabulary relative</em>
    are resolved relative to the <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-vocabulary-mapping">vocabulary mapping</a>,
    not the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-base-iri">base <abbr title="Internationalized Resource Identifier">IRI</abbr></a>.</dd></dl>

<p>Terms imported from <cite><a href="https://www.w3.org/TR/rdf11-concepts/">RDF 1.1 Concepts and Abstract Syntax</a></cite> [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf11-concepts" title="RDF 1.1 Concepts and Abstract Syntax">RDF11-CONCEPTS</a></cite>], <cite><a href="https://www.w3.org/TR/rdf-schema/">RDF Schema 1.1</a></cite> [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf-schema" title="RDF Schema 1.1">RDF-SCHEMA</a></cite>], and <cite><a href="https://www.w3.org/DesignIssues/LinkedData.html">Linked Data Design Issues</a></cite> [<cite><a class="bibref" data-link-type="biblio" href="#bib-linked-data" title="Linked Data Design Issues">LINKED-DATA</a></cite>]</p>
<dl class="termlist" data-sort=""><dt><dfn class="preserve" id="dfn-base-iri" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-base-iri">base <abbr title="Internationalized Resource Identifier">IRI</abbr></a></dfn></dt><dd>
    The <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-base-iri">base <abbr title="Internationalized Resource Identifier">IRI</abbr></a> is an <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2"><abbr title="Internationalized Resource Identifier">IRI</abbr></a> established in the <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-context">context</a>,
    or is based on the <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-json-ld-document">JSON-LD document</a> location.
    The <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-base-iri">base <abbr title="Internationalized Resource Identifier">IRI</abbr></a> is used to turn <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-6.5">relative <abbr title="Internationalized Resource Identifier">IRI</abbr> references</a> into <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2">IRIs</a>.</dd>
  <dt><dfn class="preserve" data-plurals="blank nodes" id="dfn-blank-node" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node">blank node</a></dfn></dt><dd>
    A <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-node">node</a> in a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">graph</a> that is neither an <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2"><abbr title="Internationalized Resource Identifier">IRI</abbr></a>,
    nor a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-literal">literal</a>.
    A <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node">blank node</a> does not contain
    a de-referenceable identifier because it is either ephemeral in nature
    or does not contain information that needs to be linked to from outside of the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">linked data graph</a>.
    In JSON-LD,
    a blank node is assigned an identifier starting with the prefix <code>_:</code>.</dd>
  <dt><dfn class="preserve" data-plurals="blank node identifiers" id="dfn-blank-node-identifier" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier">blank node identifier</a></dfn></dt><dd>
    A <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier">blank node identifier</a>
    is a string that can be used as an identifier for a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node">blank node</a> within the scope of a JSON-LD document.
    Blank node identifiers begin with <code>_:</code>.</dd>
  <dt><dfn data-lt="RDF dataset|dataset" class="preserve" id="dfn-rdf-dataset" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset">dataset</a></dfn></dt><dd>
    A <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset">dataset</a>
    representing a collection of <a href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">RDF graphs</a>
    including exactly one <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-default-graph">default graph</a> and zero or more <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-named-graph">named graphs</a>.</dd>
  <dt><dfn class="preserve" id="dfn-datatype-iri" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-datatype-iri">datatype <abbr title="Internationalized Resource Identifier">IRI</abbr></a></dfn></dt><dd>
    A <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-datatype-iri">datatype <abbr title="Internationalized Resource Identifier">IRI</abbr></a> is an <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2"><abbr title="Internationalized Resource Identifier">IRI</abbr></a> identifying a datatype that determines how the lexical form maps to a
    <a href="https://www.w3.org/TR/rdf11-concepts/#dfn-literal-value">literal value</a>.</dd>
  <dt><dfn class="preserve" id="dfn-default-graph" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-default-graph">default graph</a></dfn></dt><dd>
    The <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-default-graph">default graph</a> of a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset">dataset</a> is an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">RDF graph</a> having no <a data-lt="graph name" data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-graph-name">name</a>, which may be empty.</dd>
  <dt><dfn class="preserve" id="dfn-graph-name" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-graph-name">graph name</a></dfn></dt><dd>
    The <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2"><abbr title="Internationalized Resource Identifier">IRI</abbr></a> or <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node">blank node</a> identifying a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-named-graph">named graph</a>.</dd>
  <dt><dfn class="preserve" id="dfn-language-tagged-string" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-language-tagged-string">language-tagged string</a></dfn></dt><dd>
    A <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-language-tagged-string">language-tagged string</a>
    consists of a string and a non-empty language tag
    as defined by [<cite><a class="bibref" data-link-type="biblio" href="#bib-bcp47" title="Tags for Identifying Languages">BCP47</a></cite>].
    The <dfn data-plurals="language tags" id="dfn-language-tag" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-language-tag">language tag</a></dfn> must be well-formed
    according to <a href="https://tools.ietf.org/html/bcp47#section-2.2.9">section 2.2.9 Classes of Conformance</a> of [<cite><a class="bibref" data-link-type="biblio" href="#bib-bcp47" title="Tags for Identifying Languages">BCP47</a></cite>].
    <span class="changed note">Processors may normalize <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-language-tag">language tags</a> to lowercase.</span>
  </dd>
  <dt><dfn data-lt="collection|RDF collection|list" class="preserve" id="dfn-collection" data-no-export=""><a href="https://www.w3.org/TR/rdf-schema/#ch_collectionvocab">list</a></dfn></dt><dd>
    A <a data-link-type="dfn" href="https://www.w3.org/TR/rdf-schema/#ch_collectionvocab">list</a> is an ordered sequence of <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2">IRIs</a>, <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node">blank nodes</a>, and <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-literal">literals</a>.</dd>
  <dt><dfn data-lt="RDF literal|literal" class="preserve" data-plurals="literals" id="dfn-rdf-literal" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-literal">literal</a></dfn></dt><dd>
    An <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-object">object</a> expressed as a value such as a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#javascript-string">string</a> or <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-terms-and-definitions-number-value">number</a>.
    Implicitly or explicitly includes a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-datatype-iri">datatype <abbr title="Internationalized Resource Identifier">IRI</abbr></a> and, if the datatype is <code>rdf:langString</code>, an optional <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-language-tag">language tag</a>.</dd>
  <dt><dfn data-no-xref="" class="preserve" id="dfn-linked-data" data-no-export=""><cite><a href="https://www.w3.org/DesignIssues/LinkedData.html">Linked Data</a></cite></dfn></dt><dd>
    A set of documents, each containing a representation of a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">linked data graph</a> or <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset">dataset</a>.</dd>
  <dt><dfn class="preserve" data-plurals="named graphs" id="dfn-named-graph" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-named-graph">named graph</a></dfn></dt><dd>
    A <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-named-graph">named graph</a>
    is a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">linked data graph</a> that is identified by an <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2"><abbr title="Internationalized Resource Identifier">IRI</abbr></a> or <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node">blank node</a>.</dd>
  <dt><dfn class="preserve" data-plurals="nodes" id="dfn-node" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-node">node</a></dfn></dt><dd>
    A <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-node">node</a> in an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">RDF graph</a>, either the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-subject">subject</a> and <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-object">object</a> of at least one <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple">triple</a>.
    Note that a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-node">node</a> can play both roles (<a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-subject">subject</a> and <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-object">object</a>) in a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">graph</a>, even in the same <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple">triple</a>.</dd>
  <dt><dfn class="preserve" id="dfn-object" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-object">object</a></dfn></dt><dd>
    An <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-object">object</a> is a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-node">node</a> in a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">linked data graph</a>
    with at least one incoming edge.</dd>
  <dt><dfn class="preserve" data-plurals="properties" id="dfn-property" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-property">property</a></dfn></dt><dd>
    The name of a directed-arc in a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">linked data graph</a>.
    Every <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-property">property</a> is directional
    and is labeled with an <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2"><abbr title="Internationalized Resource Identifier">IRI</abbr></a> or a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier">blank node identifier</a>.
    Whenever possible, a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-property">property</a> should be labeled with an <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2"><abbr title="Internationalized Resource Identifier">IRI</abbr></a>.
    <div class="note" role="note" id="issue-container-generatedID"><div role="heading" class="note-title marker" id="h-note" aria-level="3"><span>Note</span></div><div class="">The use of <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier">blank node identifiers</a> to label properties is obsolete,
      and may be removed in a future version of JSON-LD.</div></div>
    Also, see <dfn class="preserve" id="dfn-predicate" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-predicate">predicate</a></dfn> in [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf11-concepts" title="RDF 1.1 Concepts and Abstract Syntax">RDF11-CONCEPTS</a></cite>].</dd>
  <dt><dfn class="preserve" id="dfn-resource" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-resource">resource</a></dfn></dt><dd>
    A <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-resource">resource</a> denoted by an <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2"><abbr title="Internationalized Resource Identifier">IRI</abbr></a>, a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node">blank node</a> or <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-literal">literal</a> representing something in the world (the "universe of discourse").</dd>
  <dt><dfn data-lt="linked data graph|graph|RDF graph" class="preserve" data-plurals="rdf graphs" id="dfn-linked-data-graph" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">RDF graph</a></dfn></dt><dd>
    A labeled directed <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">graph</a>,
    i.e., a set of <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-node">nodes</a> connected by directed-arcs.
    Also called <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">linked data graph</a>.
  </dd>
  <dt><dfn class="preserve" id="dfn-subject" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-subject">subject</a></dfn></dt><dd>
    A <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-subject">subject</a> is a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-node">node</a> in a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">linked data graph</a>
    with at least one outgoing edge,
    related to an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-object">object</a> node through a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-property">property</a>.</dd><dt><dfn class="preserve" data-plurals="triples" id="dfn-triple" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple">triple</a></dfn></dt><dd>
    A component of an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">RDF graph</a> including a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-subject">subject</a>, <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-predicate">predicate</a>, and <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-object">object</a>, which represents
    a node-arc-node segment of an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">RDF graph</a>.</dd>
  </dl>
</section>

<section><h2 id="json-ld-specific-term-definitions">JSON-LD Specific Term Definitions<a class="self-link" aria-label="§" href="#json-ld-specific-term-definitions"></a></h2>
<dl class="termlist" data-sort=""><dt hidden=""><dfn id="dfn-active-context" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-active-context">active context</a></dfn></dt><dd hidden="">
    A <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-context">context</a> that is used to resolve <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-term">terms</a>
    while the processing algorithm is running.</dd>
  <dt hidden=""><dfn data-lt="base direction|default base direction" data-lt-nodefault="" id="dfn-base-direction" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-base-direction">base direction</a></dfn></dt><dd hidden="">
    The <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-base-direction">base direction</a> is the direction used when a string does not have a direction associated with it directly.
    It can be set in the <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-context">context</a> using the <code>@direction</code> key
    whose value must be one of the strings <code>"ltr"</code>, <code>"rtl"</code>, or <code>null</code>.
    See the <a href="https://www.w3.org/TR/json-ld11/#context-definitions">Context Definitions</a> section of JSON-LD 1.1 for a normative description.
    </dd>
  <dt><dfn id="dfn-compact-iri" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-compact-iri">compact <abbr title="Internationalized Resource Identifier">IRI</abbr></a></dfn></dt><dd>
    A compact <abbr title="Internationalized Resource Identifier">IRI</abbr> has the form of <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-prefix">prefix</a>:<em>suffix</em>
    and is used as a way of expressing an <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2"><abbr title="Internationalized Resource Identifier">IRI</abbr></a> without needing to define separate <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-term">term</a> definitions
    for each <abbr title="Internationalized Resource Identifier">IRI</abbr> contained within a common vocabulary identified by <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-prefix">prefix</a>.</dd>
  <dt hidden=""><dfn id="dfn-context" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-context">context</a></dfn></dt><dd hidden="">
    A set of rules for interpreting a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-json-ld-document">JSON-LD document</a>
    as described in the <a href="https://www.w3.org/TR/json-ld11/#the-context">The Context</a> section of JSON-LD 1.1,
    and normatively specified in the <a href="https://www.w3.org/TR/json-ld11/#context-definitions">Context Definitions</a> section of JSON-LD 1.1.
  </dd>
  <dt hidden=""><dfn id="dfn-default-language" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-default-language">default language</a></dfn></dt><dd hidden="">
    The <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-default-language">default language</a> is the language used when a string does not have a language associated with it directly.
    It can be set in the <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-context">context</a> using the <code>@language</code> key
    whose value must be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#javascript-string">string</a> representing a [<cite><a class="bibref" data-link-type="biblio" href="#bib-bcp47" title="Tags for Identifying Languages">BCP47</a></cite>] language code or <code>null</code>.
    See the <a href="https://www.w3.org/TR/json-ld11/#context-definitions">Context Definitions</a> section of JSON-LD 1.1 for a normative description.
  </dd>
  <dt hidden=""><dfn id="dfn-default-object" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-default-object">default object</a></dfn></dt><dd hidden="">
    A <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-default-object">default object</a> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a> that has a <code>@default</code> key.</dd>
  <dt hidden=""><dfn id="dfn-embedded-context" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-embedded-context">embedded context</a></dfn></dt><dd hidden="">
    An embedded <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-context">context</a> is a context which appears
    as the <code>@context</code> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a> of one of the following:
    a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a>, a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-value-object">value object</a>, a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-graph-object">graph object</a>, a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-list-object">list object</a>,
    a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-set-object">set object</a>, the value of a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-nested-property">nested property</a>,
    or the value of an <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-expanded-term-definition">expanded term definition</a>.
    Its value may be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a> for a <a href="https://www.w3.org/TR/json-ld11/#dfn-context-definition">context definition</a>,
    as an <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2"><abbr title="Internationalized Resource Identifier">IRI</abbr></a>, or as an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list">array</a> combining either of the above.
  </dd>
  <dt hidden=""><dfn id="dfn-expanded-term-definition" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-expanded-term-definition">expanded term definition</a></dfn></dt><dd hidden="">
    An expanded term definition is a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-term-definition">term definition</a>
    where the value is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a>
    containing one or more <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-keyword">keyword</a> keys to define the associated <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2"><abbr title="Internationalized Resource Identifier">IRI</abbr></a>,
    if this is a reverse property,
    the type associated with string values, and a container mapping.
    See the <a href="https://www.w3.org/TR/json-ld11/#expanded-term-definition">Expanded Term Definition</a> section of JSON-LD 1.1 for a normative description.
  </dd>
  <dt hidden=""><dfn data-lt="frame|JSON-LD frame" id="dfn-frame" data-no-export=""><a href="https://www.w3.org/TR/json-ld11-framing/#dfn-frame">frame</a></dfn></dt><dd hidden="">
    A <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-json-ld-document">JSON-LD document</a>,
    which describes the form for transforming another <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-json-ld-document">JSON-LD document</a>
    using matching and embedding rules.
    A frame document allows additional keywords and certain <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">map entries</a>
    to describe the matching and transforming process.</dd>
  <dt hidden=""><dfn data-plurals="frame objects" id="dfn-frame-object" data-no-export=""><a href="https://www.w3.org/TR/json-ld11-framing/#dfn-frame-object">frame object</a></dfn></dt><dd hidden="">
    A frame object is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a> element within a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11-framing/#dfn-frame">frame</a>
    which represents a specific portion of the <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11-framing/#dfn-frame">frame</a> matching either
    a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a> or a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-value-object">value object</a>
    in the input.
    See the <a href="https://www.w3.org/TR/json-ld11/#frame-objects">Frame Objects</a> section of JSON-LD 1.1 for a normative description.
  </dd>
  <dt class="changed" hidden=""><dfn data-plurals="graph objects" id="dfn-graph-object" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-graph-object">graph object</a></dfn></dt><dd class="changed" hidden="">
    A <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-graph-object">graph object</a> represents a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-named-graph">named graph</a>
    as the value of a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">map entry</a> within a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a>.
    When expanded, a graph object must have an <code>@graph</code> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a>,
    and may also have <code>@id</code>, and <code>@index</code> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entries</a>.
    A <dfn class="preserve" id="dfn-simple-graph-object" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-simple-graph-object">simple graph object</a></dfn>
    is a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-graph-object">graph object</a> which does not have an <code>@id</code> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a>.
    Note that <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node objects</a> may have a <code>@graph</code> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a>,
    but are not considered <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-graph-object">graph objects</a> if they include any other <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entries</a>.
    A top-level object consisting of <code>@graph</code> is also not a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-graph-object">graph object</a>.
    Note that a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a> may also represent a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-named-graph">named graph</a> if it includes other properties.
    See the <a href="https://www.w3.org/TR/json-ld11/#graph-objects">Graph Objects</a> section of JSON-LD 1.1 for a normative description.
  </dd>
  <dt class="changed" hidden=""><dfn data-plurals="id maps" id="dfn-id-map" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-id-map">id map</a></dfn></dt><dd class="changed" hidden="">
    An <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-id-map">id map</a> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a> value of a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-term">term</a>
    defined with <code>@container</code> set to <code>@id</code>.
    The values of the <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-id-map">id map</a> must be <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node objects</a>,
    and its keys are interpreted as <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2">IRIs</a> representing
    the <code>@id</code> of the associated <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a>.
    If a value in the <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-id-map">id map</a> contains a key expanding to <code>@id</code>,
    its value must be equivalent to the referencing key in the <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-id-map">id map</a>.
    See the <a href="https://www.w3.org/TR/json-ld11/#id-maps">Id Maps</a> section of JSON-LD 1.1 for a normative description.
  </dd>
  <dt hidden=""><dfn id="dfn-implicitly-named-graph" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-implicitly-named-graph">implicitly named graph</a></dfn></dt><dd hidden="">
    A <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-named-graph">named graph</a> created from the value of a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">map entry</a>
    having an <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-expanded-term-definition">expanded term definition</a>
    where <code>@container</code> is set to  <code>@graph</code>.</dd>
  <dt class="changed" hidden=""><dfn data-plurals="included blocks" id="dfn-included-block" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-included-block">included block</a></dfn></dt><dd class="changed" hidden="">
    An <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-included-block">included block</a> is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a> in a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a> where the key is either <code>@included</code> or an alias of <code>@included</code>
    and the value is one or more <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node objects</a>.
    See the <a href="https://www.w3.org/TR/json-ld11/#included-blocks">Included Blocks</a> section of JSON-LD 1.1 for a normative description.
  </dd>
  <dt hidden=""><dfn data-plurals="index maps" id="dfn-index-map" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-index-map">index map</a></dfn></dt><dd hidden="">
    An <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-index-map">index map</a> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a> value of a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-term">term</a>
    defined with <code>@container</code> set to <code>@index</code>,
    whose values must be any of the following types:
    <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#javascript-string">string</a>,
    <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-terms-and-definitions-number-value">number</a>,
    <code>true</code>,
    <code>false</code>,
    <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#nulls">null</a>,
    <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a>,
    <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-value-object">value object</a>,
    <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-list-object">list object</a>,
    <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-set-object">set object</a>, or
    an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list">array</a> of zero or more of the above possibilities.
    See the <a href="https://www.w3.org/TR/json-ld11/#index-maps">Index Maps</a> section in JSON-LD 1.1 for a formal description.
  </dd>
  <dt hidden=""><dfn id="dfn-json-literal" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-json-literal">JSON literal</a></dfn></dt><dd hidden="">
    A <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-json-literal">JSON literal</a> is a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-literal">literal</a> where the associated <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-datatype-iri">datatype <abbr title="Internationalized Resource Identifier">IRI</abbr></a> is <code>rdf:JSON</code>.
    In the <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-value-object">value object</a> representation, the value of <code>@type</code> is <code>@json</code>.
    JSON literals represent values which are valid JSON [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8259" title="The JavaScript Object Notation (JSON) Data Interchange Format">RFC8259</a></cite>].
    See the <a href="https://www.w3.org/TR/json-ld11/#the-rdf-json-datatype">The <code>rdf:JSON</code> Datatype</a> section in JSON-LD 1.1 for a normative description.
  </dd>
  <dt hidden=""><dfn id="dfn-json-ld-document" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-json-ld-document">JSON-LD document</a></dfn></dt><dd hidden="">
    A <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-json-ld-document">JSON-LD document</a> is a serialization of
    an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset">RDF dataset</a>.
    See the <a href="https://www.w3.org/TR/json-ld11/#json-ld-grammar">JSON-LD Grammar</a> section in JSON-LD 1.1 for a formal description.
  </dd>
  <dt class="changed" hidden=""><dfn data-lt="internal representation|JSON-LD internal representation" id="dfn-internal-representation" data-no-export=""><a href="https://www.w3.org/TR/json-ld11-api/#dfn-internal-representation">JSON-LD internal representation</a></dfn></dt><dd class="changed" hidden="">
    The JSON-LD internal representation
    is the result of transforming a JSON syntactic structure
    into the core data structures suitable for direct processing:
    <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list">arrays</a>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">maps</a>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#javascript-string">strings</a>, <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-terms-and-definitions-number-value">numbers</a>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#boolean">booleans</a>, and <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#nulls">null</a>.</dd>
  <dt hidden=""><dfn data-lt="json-ld processor|Processors|JSON-LD Processor" id="dfn-json-ld-processor" data-no-export=""><a href="https://www.w3.org/TR/json-ld11-api/#dfn-json-ld-processor">JSON-LD Processor</a></dfn></dt><dd hidden="">
    A <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11-api/#dfn-json-ld-processor">JSON-LD Processor</a> is a system which can perform the algorithms defined in JSON-LD 1.1 Processing Algorithms and API.
    See the <a href="https://www.w3.org/TR/json-ld11-api/#conformance">Conformance</a> section in JSON-LD 1.1 API for a formal description.
  </dd>
  <dt><dfn class="preserve" id="dfn-json-ld-value" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-json-ld-value">JSON-LD value</a></dfn></dt><dd>
    A <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-json-ld-value">JSON-LD value</a> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#javascript-string">string</a>,
    a <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-terms-and-definitions-number-value">number</a>,
    <code>true</code> or <code>false</code>,
    a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-typed-value">typed value</a>,
    or a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-language-tagged-string">language-tagged string</a>.
    It represents an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-literal">RDF literal</a>.
  </dd>
  <dt><dfn data-plurals="keywords" id="dfn-keyword" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-keyword">keyword</a></dfn></dt><dd>
    A <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#javascript-string">string</a> that is specific to JSON-LD,
    described in the <a href="https://www.w3.org/TR/json-ld11/#syntax-tokens-and-keywords">Syntax Tokens and Keywords</a> section of JSON-LD 1.1,
    and normatively specified in the <a href="https://www.w3.org/TR/json-ld11/#keywords">Keywords</a> section of JSON-LD 1.1,
  </dd>
  <dt hidden=""><dfn data-plurals="language maps" id="dfn-language-map" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-language-map">language map</a></dfn></dt><dd hidden="">
    A <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-language-map">language map</a> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a> value of a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-term">term</a>
    defined with <code>@container</code> set to <code>@language</code>,
    whose keys must be <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#javascript-string">strings</a> representing [<cite><a class="bibref" data-link-type="biblio" href="#bib-bcp47" title="Tags for Identifying Languages">BCP47</a></cite>] language codes
    and the values must be any of the following types:
    <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#nulls">null</a>,
    <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#javascript-string">string</a>, or
    an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list">array</a> of zero or more of the above possibilities.
    See the <a href="https://www.w3.org/TR/json-ld11/#language-maps">Language Maps</a> section of JSON-LD 1.1 for a normative description.
  </dd>
  <dt><dfn id="dfn-list-object" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-list-object">list object</a></dfn></dt><dd>
    A <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-list-object">list object</a> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a> that has a <code>@list</code> key.
    It may also have an <code>@index</code> key, but no other <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entries</a>.
    See the <a href="https://www.w3.org/TR/json-ld11/#lists-and-sets">Lists and Sets</a> section of JSON-LD 1.1 for a normative description.
  </dd>
  <dt hidden=""><dfn id="dfn-local-context" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-local-context">local context</a></dfn></dt><dd hidden="">
    A <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-context">context</a> that is specified with a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a>,
    specified via the <code>@context</code> <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-keyword">keyword</a>.</dd>
  <dt hidden=""><dfn id="dfn-nested-property" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-nested-property">nested property</a></dfn></dt><dd hidden="">
    A <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-nested-property">nested property</a> is a key in a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a>
    whose value is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a> containing <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entries</a> which are treated as if they were values of the <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a>.
    The <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-nested-property">nested property</a> itself is semantically meaningless and used only to create a sub-structure within a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a>.
    See the <a href="https://www.w3.org/TR/json-ld11/#property-nesting">Property Nesting</a> section of JSON-LD 1.1 for a normative description.
  </dd>
  <dt><dfn data-plurals="node objects" id="dfn-node-object" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a></dfn></dt><dd>
    A <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a> represents zero or more <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-property">properties</a> of a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-node">node</a> in the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">graph</a>
    serialized by the <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-json-ld-document">JSON-LD document</a>.
    A <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a> is a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a>
    if it exists outside of the JSON-LD <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-context">context</a> and:
    <ul>
      <li>it does not contain the <code>@value</code>, <code>@list</code>, or <code>@set</code> keywords, or</li>
      <li>it is not the top-most <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a> in the JSON-LD document
        consisting of no other <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entries</a> than <code>@graph</code> and <code>@context</code>.</li>
    </ul>
    The <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entries</a> of a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a> whose keys are not keywords are also called <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-property">properties</a> of the <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a>.
    See the <a href="https://www.w3.org/TR/json-ld11/#node-objects">Node Objects</a> section of JSON-LD 1.1 for a normative description.
  </dd>
  <dt><dfn id="dfn-node-reference" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-node-reference">node reference</a></dfn></dt><dd>
    A <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a> used to reference a node having only the <code>@id</code> key.</dd>
  <dt hidden=""><dfn id="dfn-prefix" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-prefix">prefix</a></dfn></dt><dd hidden="">
    A <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-prefix">prefix</a> is the first component of a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-compact-iri">compact <abbr title="Internationalized Resource Identifier">IRI</abbr></a>
    which comes from a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-term">term</a> that maps to a string that,
    when prepended to the suffix of the <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-compact-iri">compact <abbr title="Internationalized Resource Identifier">IRI</abbr></a>,
    results in an <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2"><abbr title="Internationalized Resource Identifier">IRI</abbr></a>.</dd>
  <dt hidden=""><dfn id="dfn-processing-mode" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-processing-mode">processing mode</a></dfn></dt><dd hidden="">
    The <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-processing-mode">processing mode</a> defines how a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-json-ld-document">JSON-LD document</a> is processed.
    By default, all documents are assumed to be conformant with this specification.
    By defining a different version using the <code>@version</code> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a> in a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-context">context</a>,
    publishers can ensure that processors conformant with <cite><a data-no-xref="" href="https://www.w3.org/TR/json-ld/">JSON-LD 1.0</a></cite> [<cite><a class="bibref" data-link-type="biblio" href="#bib-json-ld" title="JSON-LD 1.0">JSON-LD</a></cite>]
    will not accidentally process JSON-LD 1.1 documents, possibly creating a different output.
    The API provides an option for setting the <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-processing-mode">processing mode</a> to <code>json-ld-1.0</code>,
    which will prevent JSON-LD 1.1 features from being activated,
    or error if <code>@version</code> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a> in a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-context">context</a> is explicitly set to <code>1.1</code>.
    This specification extends <cite><a data-no-xref="" href="https://www.w3.org/TR/json-ld/">JSON-LD 1.0</a></cite>
    via the <code>json-ld-1.1</code> <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-processing-mode">processing mode</a>.</dd>
  <dt><dfn class="preserve" id="dfn-scoped-context" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-scoped-context">scoped context</a></dfn></dt><dd>
    A <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-scoped-context">scoped context</a> is part of an <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-expanded-term-definition">expanded term definition</a> using the
    <code>@context</code> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a>. It has the same form as an <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-embedded-context">embedded context</a>.
    When the term is used as a type, it defines a <dfn class="preserve" id="dfn-type-scoped-context" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-type-scoped-context">type-scoped context</a></dfn>,
    when used as a property it defines a <dfn class="preserve" id="dfn-property-scoped-context" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-property-scoped-context">property-scoped context</a></dfn>.
  </dd>
  <dt hidden=""><dfn id="dfn-set-object" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-set-object">set object</a></dfn></dt><dd hidden="">
    A <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-set-object">set object</a> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a> that has an <code>@set</code> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a>.
    It may also have an <code>@index</code> key, but no other <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entries</a>.
    See the <a href="https://www.w3.org/TR/json-ld11/#lists-and-sets">Lists and Sets</a> section of JSON-LD 1.1 for a normative description.
  </dd>
  <dt hidden=""><dfn data-plurals="terms" id="dfn-term" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-term">term</a></dfn></dt><dd hidden="">
    A <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-term">term</a> is a short word defined in a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-context">context</a>
    that may be expanded to an <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2"><abbr title="Internationalized Resource Identifier">IRI</abbr></a>.
    See the <a href="https://www.w3.org/TR/json-ld11/#terms">Terms</a> section of JSON-LD 1.1 for a normative description.
  </dd>
  <dt hidden=""><dfn id="dfn-term-definition" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-term-definition">term definition</a></dfn></dt><dd hidden="">
    A term definition is an entry in a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-context">context</a>,
    where the key defines a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-term">term</a>
    which may be used within a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a>
    as a key, type, or elsewhere that a string is interpreted as a vocabulary item.
    Its value is either a string (<dfn data-lt="simple term definition|simple term" data-lt-nodefault="" id="dfn-simple-term-definition" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-simple-term-definition">simple term definition</a></dfn>),
    expanding to an <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2"><abbr title="Internationalized Resource Identifier">IRI</abbr></a>,
    or a map (<a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-expanded-term-definition">expanded term definition</a>).
  </dd>
  <dt class="changed" hidden=""><dfn data-plurals="type maps" id="dfn-type-map" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-type-map">type map</a></dfn></dt><dd class="changed" hidden="">
    A <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-type-map">type map</a> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a> value of a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-term">term</a>
    defined with <code>@container</code> set to <code>@type</code>,
    whose keys are interpreted as <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2">IRIs</a>
    representing the <code>@type</code> of the associated <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a>;
    the value must be a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a>, or <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list">array</a> of node objects.
    If the value contains a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-term">term</a> expanding to <code>@type</code>,
    its values are merged with the map value when expanding.
    See the <a href="https://www.w3.org/TR/json-ld11/#type-maps">Type Maps</a> section of JSON-LD 1.1 for a normative description.
  </dd>
  <dt><dfn class="preserve" id="dfn-typed-value" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-typed-value">typed value</a></dfn></dt><dd>
    A <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-typed-value">typed value</a> consists of a value,
    which is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#javascript-string">string</a>,
    and a type,
    which is an <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2"><abbr title="Internationalized Resource Identifier">IRI</abbr></a>.</dd>
  <dt><dfn data-plurals="value objects" id="dfn-value-object" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-value-object">value object</a></dfn></dt><dd>
    A <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-value-object">value object</a> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a> that has an <code>@value</code> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a>.
    See the <a href="https://www.w3.org/TR/json-ld11/#value-objects">Value Objects</a> section of JSON-LD 1.1 for a normative description.</dd>
  <dt><dfn class="preserve" id="dfn-vocabulary-mapping" data-no-export=""><a href="https://www.w3.org/TR/json-ld11/#dfn-vocabulary-mapping">vocabulary mapping</a></dfn></dt><dd>
    The vocabulary mapping is set in the <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-context">context</a> using the <code>@vocab</code> key
    whose value must be an <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2"><abbr title="Internationalized Resource Identifier">IRI</abbr></a>, a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-compact-iri">compact <abbr title="Internationalized Resource Identifier">IRI</abbr></a>, a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-term">term</a>, or <code>null</code>.
    See the <a href="https://www.w3.org/TR/json-ld11/#context-definitions">Context Definitions</a> section of JSON-LD 1.1 for a normative description.</dd></dl>
</section>
</div>
    <div><dl class="termlist" data-sort=""><dt hidden=""><dfn id="dfn-active-graph" data-no-export=""><a href="https://www.w3.org/TR/json-ld11-api/#dfn-active-graph">active graph</a></dfn></dt><dd hidden="">
    The name of the currently active graph that the processor should use when processing.</dd>
  <dt hidden=""><dfn id="dfn-active-object" data-no-export=""><a href="https://www.w3.org/TR/json-ld11-api/#dfn-active-object">active object</a></dfn></dt><dd hidden="">
    The currently active object that the processor should use when processing.</dd>
  <dt hidden=""><dfn id="dfn-active-property" data-no-export=""><a href="https://www.w3.org/TR/json-ld11-api/#dfn-active-property">active property</a></dfn></dt><dd hidden="">
    The currently active <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-property">property</a> or <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-keyword">keyword</a> that the processor should use when processing.
    The <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11-api/#dfn-active-property">active property</a> is represented in the original lexical form,
    which is used for finding coercion mappings in the <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-active-context">active context</a>.</dd>
  <dt hidden=""><dfn id="dfn-active-subject" data-no-export=""><a href="https://www.w3.org/TR/json-ld11-api/#dfn-active-subject">active subject</a></dfn></dt><dd hidden="">
    The currently active subject that the processor should use when processing.</dd>
  <dt class="changed"><dfn id="dfn-add-value" data-no-export=""><a href="https://www.w3.org/TR/json-ld11-api/#dfn-add-value">add value</a></dfn></dt>
  <dd class="algorithm changed">
    Used as a macro within various algorithms as a way to add a <var>value</var>
    to an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a> in a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a> (<var>object</var>) using a specified <var>key</var>.
    The invocation may include an <var>as array</var> flag defaulting to <code>false</code>.
    <ol>
      <li>If <var>as array</var> is <code>true</code>
        and the value of <var>key</var> in <var>object</var> does not exist
        or is not an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list">array</a>, set it to a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list">array</a>
        containing any original value.</li>
      <li>If <var>value</var> is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list">array</a>,
        then for each element <var>v</var> in <var>value</var>,
        use <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11-api/#dfn-add-value">add value</a> recursively to add <var>v</var> to <var>key</var> in <var>entry</var>.</li>
      <li>Otherwise:
        <ol>
          <li>If <var>key</var> is not an entry in <var>object</var>,
            add <var>value</var> as the value of <var>key</var> in <var>object</var>.</li>
          <li>Otherwise
            <ol>
              <li>If the value of the <var>key</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a> in <var>object</var> is not an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list">array</a>,
                set it to a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list">array</a> containing the original value.</li>
              <li>Append <var>value</var>
                to the value of the <var>key</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a> in <var>object</var>.</li>
            </ol>
          </li>
        </ol>
      </li>
    </ol>
  </dd>
  <dt hidden=""><dfn id="dfn-explicit-inclusion-flag" data-no-export=""><a href="https://www.w3.org/TR/json-ld11-framing/#dfn-explicit-inclusion-flag">explicit inclusion flag</a></dfn></dt><dd hidden="">
    A flag specifying that for <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-property">properties</a> to be included in the output,
    they must be explicitly declared in the matching <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11-framing/#dfn-frame">frame</a>.</dd>
  <dt hidden=""><dfn id="dfn-framing-state" data-no-export=""><a href="https://www.w3.org/TR/json-ld11-framing/#dfn-framing-state">framing state</a></dfn></dt><dd hidden="">
    A <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a> containing values for
    the <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11-framing/#dfn-object-embed-flag">object embed flag</a>,
    the <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11-framing/#dfn-require-all-flag">require all flag</a>,
    <span class="changed">the <a href="https://www.w3.org/TR/json-ld11-framing/#dfn-embedded-flag">embedded flag</a>,
    used internally to help determine if object embedding is appropriate,</span>
    the <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11-framing/#dfn-explicit-inclusion-flag">explicit inclusion flag</a>,
    and the <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11-framing/#dfn-omit-default-flag">omit default flag</a>.</dd>
  <dt hidden=""><dfn id="dfn-input-frame" data-no-export=""><a href="https://www.w3.org/TR/json-ld11-framing/#dfn-input-frame">input frame</a></dfn></dt><dd hidden="">
    The initial <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11-framing/#dfn-frame">Frame</a> provided to the framing algorithm.</dd>
  <dt class="changed" hidden=""><dfn id="dfn-iri-compacting" data-no-export=""><a href="https://www.w3.org/TR/json-ld11-api/#dfn-iri-compacting"><abbr title="Internationalized Resource Identifier">IRI</abbr> compacting</a></dfn></dt>
  <dd class="algorithm changed" hidden="">
    Used as a macro within various algorithms as to reduce the language used to describe
    the process of compacting a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#javascript-string">string</a> <var>var</var> representing an <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2"><abbr title="Internationalized Resource Identifier">IRI</abbr></a> or <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-keyword">keyword</a>
    using an <var>active context</var> either specified directly, or coming from the scope of
    the algorithm step using this term.
    An optional <var>value</var> is used, if explicitly provided.
    Unless specified, the <var>vocab</var> flag defaults to <code>true</code>,
    and the <var>reverse</var> flag defaults to <code>false</code>.
    <ol>
      <li>Return the result of using the <a href="https://www.w3.org/TR/json-ld11-api/#iri-compaction"><abbr title="Internationalized Resource Identifier">IRI</abbr> Compaction algorithm</a>,
        passing <var>active context</var>,
        <var>var</var>,
        <var>value</var> (if supplied),
        <var>vocab</var>,
        and <var>result</var>.</li>
    </ol>
  </dd>
  <dt class="changed" hidden=""><dfn id="dfn-iri-expanding" data-no-export=""><a href="https://www.w3.org/TR/json-ld11-api/#dfn-iri-expanding"><abbr title="Internationalized Resource Identifier">IRI</abbr> expanding</a></dfn></dt>
  <dd class="algorithm changed" hidden="">
    Used as a macro within various algorithms as to reduce the language used to describe
    the process of expanding a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#javascript-string">string</a> <var>value</var> representing an <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2"><abbr title="Internationalized Resource Identifier">IRI</abbr></a> or <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-keyword">keyword</a>
    using an <var>active context</var> either specified directly, or coming from the scope of
    the algorithm step using this term.
    Optional <var>defined</var> and <var>local context</var> arguments are used, if explicitly provided.
    Unless specified,
    the <var>document relative</var> flag defaults to <code>false</code>,
    and the <var>vocab</var> flag defaults to <code>true</code>.
    <ol>
      <li>Return the result of using the <a href="https://www.w3.org/TR/json-ld11-api/#iri-expansion"><abbr title="Internationalized Resource Identifier">IRI</abbr> Expansion algorithm</a>,
        passing <var>active context</var>,
        <var>value</var>,
        <var>local context</var> (if supplied),
        <var>defined</var> (if supplied),
        <var>document relative</var>,
        and <var>vocab</var>.</li>
    </ol>
  </dd>
  <dt><dfn class="preserve" id="dfn-json-ld-input" data-no-export=""><a href="https://www.w3.org/TR/json-ld11-api/#dfn-json-ld-input">JSON-LD input</a></dfn></dt><dd>
    The JSON-LD data structure that is provided as input to the algorithm.</dd>
  <dt hidden=""><dfn id="dfn-json-ld-output" data-no-export=""><a href="https://www.w3.org/TR/json-ld11-api/#dfn-json-ld-output">JSON-LD output</a></dfn></dt><dd hidden="">
    The JSON-LD data structure that is produced as output by the algorithm.</dd>
  <dt hidden=""><dfn id="dfn-map-of-flattened-subjects" data-no-export=""><a href="https://www.w3.org/TR/json-ld11-framing/#dfn-map-of-flattened-subjects">map of flattened subjects</a></dfn></dt><dd hidden="">
    A map of subjects that is the result of the
    <a href="https://www.w3.org/TR/json-ld11-api/#node-map-generation">Node Map Generation algorithm</a>.</dd>
  <dt hidden=""><dfn id="dfn-object-embed-flag" data-no-export=""><a href="https://www.w3.org/TR/json-ld11-framing/#dfn-object-embed-flag">object embed flag</a></dfn></dt><dd hidden="">
    A flag specifying that <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node objects</a> should be directly embedded in the output,
    instead of being referred to by their <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2"><abbr title="Internationalized Resource Identifier">IRI</abbr></a>.</dd>
  <dt hidden=""><dfn id="dfn-omit-default-flag" data-no-export=""><a href="https://www.w3.org/TR/json-ld11-framing/#dfn-omit-default-flag">omit default flag</a></dfn></dt><dd hidden="">
    A flag specifying that properties that are missing from the <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11-api/#dfn-json-ld-input">JSON-LD input</a>,
    but present in the <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11-framing/#dfn-input-frame">input frame</a>,
    should be omitted from the output.</dd>
  <dt class="changed" hidden=""><dfn id="dfn-omit-graph-flag" data-no-export=""><a href="https://www.w3.org/TR/json-ld11-framing/#dfn-omit-graph-flag">omit graph flag</a></dfn></dt><dd class="changed" hidden="">
    A flag that determines if framing output is always contained within a <code>@graph</code> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a>,
    or only if required to represent multiple <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node objects</a>.</dd>
  <dt hidden=""><dfn id="dfn-processor-state" data-no-export=""><a href="https://www.w3.org/TR/json-ld11-api/#dfn-processor-state">processor state</a></dfn></dt><dd hidden="">
    The <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11-api/#dfn-processor-state">processor state</a>,
    which includes the <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-active-context">active context</a>, <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11-api/#dfn-active-subject">active subject</a>, and <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11-api/#dfn-active-property">active property</a>.
    The <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11-api/#dfn-processor-state">processor state</a> is managed as a stack with elements from the previous <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11-api/#dfn-processor-state">processor state</a>
    copied into a new <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11-api/#dfn-processor-state">processor state</a> when entering a new <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc8259#section-4">JSON object</a>.</dd>
  <dt hidden=""><dfn id="dfn-require-all-flag" data-no-export=""><a href="https://www.w3.org/TR/json-ld11-framing/#dfn-require-all-flag">require all flag</a></dfn></dt><dd hidden="">
    A flag specifying that all properties present in the <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11-framing/#dfn-input-frame">input frame</a>
    must either have a default value
    or be present in the <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11-api/#dfn-json-ld-input">JSON-LD input</a>
    for the frame to match.</dd></dl>
</div>
  </div>

  <section id="conformance"><h2 id="x2-conformance"><bdi class="secno">2. </bdi>Conformance<a class="self-link" aria-label="§" href="#conformance"></a></h2><p>As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this specification are non-normative. Everything else in this specification is normative.</p><p>
        The key words <em class="rfc2119">MAY</em>, <em class="rfc2119">MUST</em>, and <em class="rfc2119">MUST NOT</em> in this document
        are to be interpreted as described in
        <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>
        [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8174" title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
        when, and only when, they appear in all capitals, as shown here.
      </p>
    <p>A <a href="#dfn-json-ld-star-document" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-json-ld-star-document-1">JSON-LD-star document</a> complies with this specification if it follows
      the normative statements in <a href="#grammar-extensions" class="sec-ref">§&nbsp;<bdi class="secno">7. </bdi>Grammar Extensions</a>.
      For convenience, normative
      statements for documents are often phrased as statements on the properties of the document.</p>

    <p>This specification makes use of the following namespace prefixes:</p>
    <table class="simple">
      <thead><tr>
        <th>Prefix</th>
        <th><abbr title="Internationalized Resource Identifier">IRI</abbr></th>
      </tr></thead>
      <tbody>
        <tr>
          <td>ex</td>
          <td>http://example.org/</td>
        </tr>
        <tr>
          <td>rdf</td>
          <td>http://www.w3.org/1999/02/22-rdf-syntax-ns#</td>
        </tr>
        <tr>
          <td>xsd</td>
          <td>http://www.w3.org/2001/XMLSchema#</td>
        </tr>
      </tbody>
    </table>

    <p>These are used within this document as part of a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-compact-iri">compact <abbr title="Internationalized Resource Identifier">IRI</abbr></a>
      as a shorthand for the resulting <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2"><abbr title="Internationalized Resource Identifier">IRI</abbr></a>, such as <code>dcterms:title</code>
      used to represent <code>http://purl.org/dc/terms/title</code>.</p>
  </section>

  <section class="informative" id="json-ld-star-specific-terms">
    <h2 id="x3-json-ld-star-specific-terms"><bdi class="secno">3. </bdi>JSON-LD-star-specific Terms<a class="self-link" aria-label="§" href="#json-ld-star-specific-terms"></a></h2><p><em>This section is non-normative.</em></p>

    <p>The Following terms are used within specific algorithms.</p>

    <dl data-sort=""><dt><dfn data-plurals="annotation objects" id="dfn-annotation-object">Annotation Object</dfn></dt><dd>
        An <a href="#dfn-annotation-object" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-annotation-object-2">annotation object</a> is a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a> which is the value
        of <code>@annotation</code> (or an alias). It describes [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdfstar" title="RDF-star and SPARQL-star">RDFStar</a></cite>] annotations
        made on the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple">triple</a> between by its parent <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a> or <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-value-object">value object</a>, and the parent's closest ancestor <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a>.
      </dd><dt><dfn data-plurals="embedded nodes" id="dfn-embedded-node">Embedded Node</dfn></dt><dd>
        An <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-2">embedded node</a> is a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a> describing exactly one <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-property">property</a>/value pair.
        The <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a> <em class="rfc2119">MAY</em> be identified as with other node objects (including with an <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-3">embedded node</a>).
        The <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-property">property</a> <em class="rfc2119">MUST</em> be either <code>@type</code> or an <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2"><abbr title="Internationalized Resource Identifier">IRI</abbr></a>.
        The property value <em class="rfc2119">MUST</em> be either an <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2"><abbr title="Internationalized Resource Identifier">IRI</abbr></a>, <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node">blank node</a>, <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-literal">literal</a> or an <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-4">embedded node</a>.
        An <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-5">embedded node</a> <em class="rfc2119">MAY</em> contain other <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entries</a> that do not, themselves, create directed-arcs, such
        as <code>@context</code> or <code>@index</code>.
        An <a data-link-type="dfn" href="https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html#dfn-embedded-triple">embedded triples</a> is the representation of an <dfn data-plurals="embedded triples" id="dfn-embedded-triple" data-no-export=""><a href="https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html#dfn-embedded-triple">embedded triple</a></dfn>.
      </dd>
      <dt><dfn id="dfn-json-ld-star-document">JSON-LD-star document</dfn></dt><dd>
        A <a href="#dfn-json-ld-star-document" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-json-ld-star-document-2">JSON-LD-star document</a> is a serialization of
        an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset">RDF dataset</a> as extended by [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdfstar" title="RDF-star and SPARQL-star">RDFStar</a></cite>].
      </dd>
      <dt><dfn id="dfn-rdf-star-dataset" data-no-export=""><a href="https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html#dfn-dataset">RDF-star dataset</a></dfn></dt><dd>
        An <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset">RDF dataset</a> extended to allow the use of an
        <a data-link-type="dfn" href="https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html#dfn-graph">RDF-star graph</a> instead of a plain <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">RDF graph</a>.
      </dd>
      <dt><dfn id="dfn-rdf-star-graph" data-no-export=""><a href="https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html#dfn-graph">RDF-star graph</a></dfn></dt><dd>
        A set of <a data-link-type="dfn" href="https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html#dfn-triple">RDF-star triples</a>.
      </dd>
      <dt><dfn data-plurals="rdf-star triples" id="dfn-rdf-star-triple" data-no-export=""><a href="https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html#dfn-triple">RDF-star triple</a></dfn></dt><dd>
        An <a href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple">RDF triple</a> extended to allow an <a data-link-type="dfn" href="https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html#dfn-triple">RDF-star triple</a> to be
        used in the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-subject">subject</a> or <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-object">object</a> position.
      </dd>
      </dl>
  </section>

  <section id="basic-concepts" class="informative">
    <h2 id="x4-basic-concepts"><bdi class="secno">4. </bdi>Basic Concepts<a class="self-link" aria-label="§" href="#basic-concepts"></a></h2><p><em>This section is non-normative.</em></p>

    <p>This specification adds the concepts of an <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-6">embedded node</a>
      and <a href="#dfn-annotation-object" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-annotation-object-3">annotation object</a> to JSON-LD in order to add the
      ability to make statements about individual <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple">triples</a> in an
      <a data-link-type="dfn" href="https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html#dfn-graph">RDF-star Graph</a>.</p>

    <p>An <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-7">embedded node</a> supports the ability to make one or more statements
      about a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple">triple</a>, represented by an <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-8">embedded node</a>, without that
      triple being necessarily considered to be part of the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">Linked Data Graph</a>.</p>

    <p>The following example shows how the value of <code>@id</code> can be an
      of <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-9">embedded node</a>, which expresses a single <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple">triple</a>:</p>

    <aside class="example ds-selector-tabs" id="example-3-embedded-node-as-subject"><div class="marker">
    <a class="self-link" href="#example-3-embedded-node-as-subject">Example<bdi> 3</bdi></a><span class="example-title">: Embedded node as subject</span>
  </div>
      <div class="selectors">
        <button class="selected input" data-selects="compacted">Compacted (Input)</button>
        <button data-selects="expanded">Expanded</button>
        <button data-selects="flattened">Flattened</button>
        <button data-selects="turtle">Turtle-star</button>
      </div>
      <pre class="compacted input selected" data-options="rdfstar=true" aria-busy="false"><code class="hljs">{
  "@context": {
    "@base": "http://example.org/",
    "@vocab": "http://example.org/"
  },
  "@id": {
    "@id": "bob",
    "age": 42
  },
  "certainty": 0.8
}</code></pre>
      <pre class="expanded" data-options="rdfstar=true" data-result-for="Embedded node as subject-compacted" aria-busy="false"><code class="hljs">[{
  "@id": {
    "@id": "http://example.org/bob",
    "http://example.org/age": [{"@value": 42}]
  },
  "http://example.org/certainty": [{"@value": 0.8}]
}]</code></pre>
      <pre class="flattened" data-options="rdfstar=true" data-flatten="" data-result-for="Embedded node as subject-compacted" aria-busy="false"><code class="hljs">[{
  "@id": {
    "@id": "http://example.org/bob",
    "http://example.org/age": [{"@value": 42}]
  },
  "http://example.org/certainty": [{"@value": 0.8}]
}]</code></pre>
      <pre class="turtle" data-content-type="text/turtle" data-options="rdfstar=true,canonicalize=true" data-to-rdf="" data-result-for="Embedded node as subject-compacted" aria-busy="false"><code class="hljs">@prefix : &lt;http://example.org/&gt; .

&lt;&lt; :bob :age 42 &gt;&gt; :certainty 0.8e0 .</code></pre>
    </aside>

    <p>An <a href="#dfn-annotation-object" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-annotation-object-4">annotation object</a> supports the ability to make one or more statements (annotations)
      about a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple">triple</a>, where the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple">triple</a> <em>is</em> considered to be part of the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">Linked Data Graph</a>.</p>

    <aside class="example ds-selector-tabs" id="example-4-annotating-a-node"><div class="marker">
    <a class="self-link" href="#example-4-annotating-a-node">Example<bdi> 4</bdi></a><span class="example-title">: Annotating a node</span>
  </div>
      <div class="selectors">
        <button class="selected input" data-selects="compacted">Compacted (Input)</button>
        <button data-selects="expanded">Expanded</button>
        <button data-selects="flattened">Flattened</button>
        <button data-selects="turtle">Turtle-star</button>
      </div>
      <pre class="compacted input selected" data-options="rdfstar=true" aria-busy="false"><code class="hljs">{
  "@context": {
    "@base": "http://example.org/",
    "@vocab": "http://example.org/"
  },
  "@id": "bob",
  "age": {
    "@value": 42,
    "@annotation": {
      "certainty": 0.8
    }
  }
}</code></pre>
      <pre class="expanded" data-options="rdfstar=true" data-result-for="Annotating a node-compacted" aria-busy="false"><code class="hljs">[{
  "@id": "http://example.org/bob",
  "http://example.org/age": [{
    "@value": 42,
    "@annotation": [{
      "http://example.org/certainty": [{"@value": 0.8}]
    }]
  }]
}]</code></pre>
      <pre class="flattened" data-options="rdfstar=true" data-flatten="" data-result-for="Annotating a node-compacted" aria-busy="false"><code class="hljs">[{
  "@id": "http://example.org/bob",
  "http://example.org/age": [{"@value": 42}]
}, {
  "@id": {
    "@id": "http://example.org/bob",
    "http://example.org/age": [{"@value": 42}]
  },
  "http://example.org/certainty": [{"@value": 0.8}]
}]</code></pre>
      <pre class="turtle" data-content-type="text/turtle" data-options="rdfstar=true,canonicalize=true" data-to-rdf="" data-result-for="Annotating a node-compacted" aria-busy="false"><code class="hljs">@prefix : &lt;http://example.org/&gt; .

:bob :age 42 .
&lt;&lt; :bob :age 42 &gt;&gt; :certainty 0.8e0 .</code></pre>
    </aside>
  </section>

  <section id="advanced-concepts" class="informative">
    <h2 id="x5-advanced-concepts"><bdi class="secno">5. </bdi>Advanced Concepts<a class="self-link" aria-label="§" href="#advanced-concepts"></a></h2><p><em>This section is non-normative.</em></p>
    <p>JSON-LD allows many more sophisticated ways of describing data and
      both <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-10">embedded nodes</a> and <a href="#dfn-annotation-object" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-annotation-object-5">annotation objects</a> work along with these
      other features, to the extent that they are used in describing a single relationship.</p>

    <section id="reverse-properties" class="informative">
      <h3 id="x5-1-reverse-properties"><bdi class="secno">5.1 </bdi>Reverse Properties<a class="self-link" aria-label="§" href="#reverse-properties"></a></h3><p><em>This section is non-normative.</em></p>
      <p>JSON-LD allows the description of <a href="https://www.w3.org/TR/json-ld11/#reverse-proerties">JSON-LD 1.1</a>
        within <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node objects</a>, either by defining a term using <code>@reverse</code>, or using
        <code>@reverse</code> directly within a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a>.</p>

      <p>An <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-11">embedded node</a> <em class="rfc2119">MUST NOT</em>, itself, use a reverse property.</p>

      <p>The relationships between nodes can be reversed even when those
        nodes use embedded objects:</p>

      <aside class="example ds-selector-tabs" id="example-5-reversing-relationship-with-embedded-node"><div class="marker">
    <a class="self-link" href="#example-5-reversing-relationship-with-embedded-node">Example<bdi> 5</bdi></a><span class="example-title">: Reversing relationship with embedded node</span>
  </div>
        <div class="selectors">
          <button class="selected input" data-selects="compacted">Compacted (Input)</button>
          <button data-selects="expanded">Expanded</button>
          <button data-selects="flattened">Flattened</button>
          <button data-selects="turtle">Turtle-star</button>
        </div>
        <pre class="compacted input selected" data-options="rdfstar=true" aria-busy="false"><code class="hljs">{
  "@context": {
    "@base": "http://example.org/",
    "@vocab": "http://example.org/",
    "knows": {"@type": "@id"},
    "claimedBy": {"@reverse": "http://example.org/claims", "@type": "@id"}
  },
  "@id": {
    "@id": "bob",
    "knows": "alice"
  },
  "claimedBy": "alice"
}</code></pre>
        <pre class="expanded" data-options="rdfstar=true" data-result-for="Reversing relationship with embedded node-compacted" aria-busy="false"><code class="hljs">[{
  "@id": {
    "@id": "http://example.org/bob",
    "http://example.org/knows": [{"@id": "http://example.org/alice"}]
  },
  "@reverse": {
    "http://example.org/claims": [{"@id": "http://example.org/alice"}]
  }
}]</code></pre>
        <pre class="flattened" data-options="rdfstar=true" data-flatten="" data-result-for="Reversing relationship with embedded node-compacted" aria-busy="false"><code class="hljs">[{
  "@id": "http://example.org/alice",
  "http://example.org/claims": [{
    "@id": {
      "@id": "http://example.org/bob",
      "http://example.org/knows": [{"@id": "http://example.org/alice"}]
    }
  }]
}]</code></pre>
        <pre class="turtle" data-content-type="text/turtle" data-options="rdfstar=true" data-to-rdf="" data-result-for="Reversing relationship with embedded node-compacted" aria-busy="false"><code class="hljs">@prefix : &lt;http://example.org/&gt; .

:alice :claims &lt;&lt; :bob :knows :alice &gt;&gt; .</code></pre>
      </aside>

      <p>Annotations may themselves use reverse properties, in which case
        the annotated triple will be the subject (instead of the object) of the annotation:</p>

      <aside class="example ds-selector-tabs" id="example-6-reversing-annotations"><div class="marker">
    <a class="self-link" href="#example-6-reversing-annotations">Example<bdi> 6</bdi></a><span class="example-title">: Reversing annotations</span>
  </div>
        <div class="selectors">
          <button class="selected input" data-selects="compacted">Compacted (Input)</button>
          <button data-selects="expanded">Expanded</button>
          <button data-selects="flattened">Flattened</button>
          <button data-selects="turtle">Turtle-star</button>
        </div>
        <pre class="compacted input selected" data-options="rdfstar=true" aria-busy="false"><code class="hljs">{
  "@context": {
    "@base": "http://example.org/",
    "@vocab": "http://example.org/",
    "accordingTo": {"@type": "@id"},
    "claimedBy": {"@reverse": "http://example.org/claims", "@type": "@id"}
  },
  "@id": "bob",
  "knows": {
    "@id": "alice",
    "@annotation": {
      "accordingTo": "alice",
      "claimedBy": "bob"
    }
  }
}</code></pre>
        <pre class="expanded" data-options="rdfstar=true" data-result-for="Reversing annotations-compacted" aria-busy="false"><code class="hljs">[{
  "@id": "http://example.org/bob",
  "http://example.org/knows": [{
    "@id": "http://example.org/alice",
    "@annotation": [{
      "http://example.org/accordingTo": [{"@id": "http://example.org/alice"}],
      "@reverse": {
        "http://example.org/claims": [{"@id": "http://example.org/bob"}]
      }
    }]
  }]
}]</code></pre>
        <pre class="flattened" data-options="rdfstar=true" data-flatten="" data-result-for="Reversing annotations-compacted" aria-busy="false"><code class="hljs">  [{
    "@id": "http://example.org/bob",
    "http://example.org/knows": [{"@id": "http://example.org/alice"}],
    "http://example.org/claims": [{
      "@id": {
        "@id": "http://example.org/bob",
        "http://example.org/knows": [{"@id": "http://example.org/alice"}]
      }
    }]
  }, {
  "@id": {
    "@id": "http://example.org/bob",
    "http://example.org/knows": [{"@id": "http://example.org/alice"}]
  },
  "http://example.org/accordingTo": [{"@id": "http://example.org/alice"}]
}]</code></pre>
        <pre class="turtle" data-content-type="text/turtle" data-options="rdfstar=true" data-to-rdf="" data-result-for="Reversing annotations-compacted" aria-busy="false"><code class="hljs">@prefix : &lt;http://example.org/&gt; .

:bob :knows :alice .
&lt;&lt; :bob :knows :alice &gt;&gt; :accordingTo :alice .
:bob :claims &lt;&lt; :bob :knows :alice &gt;&gt; .</code></pre>
      </aside>
    </section>

    <section id="deep-embedding" class="informative">
      <h3 id="x5-2-deep-embedding"><bdi class="secno">5.2 </bdi>Deep Embedding<a class="self-link" aria-label="§" href="#deep-embedding"></a></h3><p><em>This section is non-normative.</em></p>

      <p>[<cite><a class="bibref" data-link-type="biblio" href="#bib-rdfstar" title="RDF-star and SPARQL-star">RDFstar</a></cite>] allows <a data-link-type="dfn" href="https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html#dfn-embedded-triple">embedded triples</a> to contain other <a data-link-type="dfn" href="https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html#dfn-embedded-triple">embedded triples</a>, recursively.
        Similarly, an embedded node may be made up of other embedded nodes,
        and annotations may be made upon embedded nodes.</p>

      <aside class="example ds-selector-tabs" id="example-7-embedded-nodes-and-annotations"><div class="marker">
    <a class="self-link" href="#example-7-embedded-nodes-and-annotations">Example<bdi> 7</bdi></a><span class="example-title">: Embedded nodes and annotations</span>
  </div>
        <div class="selectors">
          <button class="selected input" data-selects="compacted">Compacted (Input)</button>
          <button data-selects="expanded">Expanded</button>
          <button data-selects="flattened">Flattened</button>
          <button data-selects="turtle">Turtle-star</button>
        </div>
        <pre class="compacted input selected" data-options="rdfstar=true" aria-busy="false"><code class="hljs">{
  "@context": {
    "@base": "http://example.org/",
    "@vocab": "http://example.org/",
    "claims": {"@type": "@id"}
  },
  "@id": {
    "@id": "bob",
    "knows": {"@id": "alice"}
  },
  "certainty": {
    "@value": 0.8,
    "@annotation": {"claims": "ted"}
  }
}</code></pre>
        <pre class="expanded" data-options="rdfstar=true" data-result-for="Embedded nodes and annotations-compacted" aria-busy="false"><code class="hljs">[{
  "@id": {
    "@id": "http://example.org/bob",
    "http://example.org/knows": [{"@id": "http://example.org/alice"}]
  },
  "http://example.org/certainty": [{
    "@value": 0.8,
    "@annotation": [{
      "http://example.org/claims": [{"@id": "http://example.org/ted"}]
    }]
  }]
}]</code></pre>
        <pre class="flattened" data-options="rdfstar=true" data-flatten="" data-result-for="Embedded nodes and annotations-compacted" aria-busy="false"><code class="hljs">[{
  "@id": {
    "@id": "http://example.org/bob",
    "http://example.org/knows": [{"@id": "http://example.org/alice"}]
  },
  "http://example.org/certainty": [{"@value": 0.8}]
}, {
  "@id": {
    "@id": {
      "@id": "http://example.org/bob",
      "http://example.org/knows": [{"@id": "http://example.org/alice"}]
    },
    "http://example.org/certainty": [{"@value": 0.8}]
  },
  "http://example.org/claims": [{"@id": "http://example.org/ted"}]
}]</code></pre>
        <pre class="turtle" data-content-type="text/turtle" data-options="rdfstar=true,canonicalize=true" data-to-rdf="" data-result-for="Embedded nodes and annotations-compacted" aria-busy="false"><code class="hljs">@prefix : &lt;http://example.org/&gt; .

&lt;&lt; :bob :knows :alice &gt;&gt; :certainty 0.8e0 .
&lt;&lt; &lt;&lt; :bob :knows :alice &gt;&gt; :certainty 0.8e0 &gt;&gt; :claims :ted .</code></pre>
      </aside>
    </section>

    <section id="mixing-annotations-and-embedded-nodes" class="informative">
      <h3 id="x5-3-mixing-annotations-and-embedded-nodes"><bdi class="secno">5.3 </bdi>Mixing Annotations and Embedded Nodes<a class="self-link" aria-label="§" href="#mixing-annotations-and-embedded-nodes"></a></h3><p><em>This section is non-normative.</em></p>
      <p><a href="#dfn-annotation-object" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-annotation-object-6">Annotation objects</a> and <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-12">embedded nodes</a> can be used together.
        As well, <a href="#dfn-annotation-object" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-annotation-object-7">annotation objects</a> can be used to annotate <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-13">embedded nodes</a>
        (see <a href="#deep-embedding" class="sectionRef sec-ref">§&nbsp;<bdi class="secno">5.2 </bdi>Deep Embedding</a>),
        <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-14">embedded nodes</a> may be used within <a href="#dfn-annotation-object" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-annotation-object-8">annotation objects</a>,
        and <a href="#dfn-annotation-object" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-annotation-object-9">annotation objects</a> may be used to annotate annotations.
        However, the <a href="#grammar-extensions">grammar</a> prevents
        <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-15">embedded nodes</a> from including <a href="#dfn-annotation-object" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-annotation-object-10">annotation objects</a>.</p>

      <p>While it is beyond the scope of this document to discuss use cases
        for these scenarios, it is an important notion of regularity
        of expression, which is shared by formats such as <a href="https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html#turtle-star">Turtle-star</a>.</p>

      <p>Consider the following examples:</p>

      <aside class="example ds-selector-tabs" id="example-8-annotation-containing-embedded-node"><div class="marker">
    <a class="self-link" href="#example-8-annotation-containing-embedded-node">Example<bdi> 8</bdi></a><span class="example-title">: Annotation containing embedded node</span>
  </div>
        <div class="selectors">
          <button class="selected input" data-selects="compacted">Compacted (Input)</button>
          <button data-selects="expanded">Expanded</button>
          <button data-selects="flattened">Flattened</button>
          <button data-selects="turtle">Turtle-star</button>
        </div>
        <pre class="compacted input selected" data-options="rdfstar=true" aria-busy="false"><code class="hljs">{
  "@context": {
    "@vocab": "ex:",
    "p1": {"@type": "@id"}
  },
  "@id": "ex:s",
  "p": {
    "@id": "ex:o",
    "@annotation": {
      "r": {
        "@id": "ex:s1",
        "@annotation": {
          "p1": "ex:o1"
        }
      }
    }
  }
}</code></pre>
        <pre class="expanded" data-options="rdfstar=true" data-result-for="Annotation containing embedded node-compacted" aria-busy="false"><code class="hljs">[{
  "@id": "ex:s",
  "ex:p": [{
    "@id": "ex:o",
    "@annotation": [{
      "ex:r": [{
        "@id": "ex:s1",
        "@annotation": [{
          "ex:p1": [{"@id": "ex:o1"}]
        }]
      }]
    }]
  }]
}]</code></pre>
        <pre class="flattened" data-options="rdfstar=true" data-flatten="" data-result-for="Annotation containing embedded node-compacted" aria-busy="false"><code class="hljs">[{
  "@id": "ex:s",
  "ex:p": [{"@id": "ex:o"}]
}, {
  "@id": {
    "@id": "ex:s",
    "ex:p": [{"@id": "ex:o"}]
  },
  "ex:r": [{"@id": "ex:s1"}]
}, {
  "@id": {
    "@id": {
      "@id": "ex:s",
      "ex:p": [{"@id": "ex:o"}]
    },
    "ex:r": [{"@id": "ex:s1"}]
  },
  "ex:p1": [{"@id": "ex:o1"}]
}]</code></pre>
        <pre class="turtle" data-content-type="text/turtle" data-options="rdfstar=true,canonicalize=true" data-to-rdf="" data-result-for="Annotation containing embedded node-compacted" aria-busy="false"><code class="hljs">@prefix : &lt;ex:&gt; .

:s :p :o {| :r :s1 {| :p1 :o1 |} |} .</code></pre>
      </aside>

      <aside class="example ds-selector-tabs" id="example-9-annotating-an-annotation"><div class="marker">
    <a class="self-link" href="#example-9-annotating-an-annotation">Example<bdi> 9</bdi></a><span class="example-title">: Annotating an annotation</span>
  </div>
        <div class="selectors">
          <button class="selected input" data-selects="compacted">Compacted (Input)</button>
          <button data-selects="expanded">Expanded</button>
          <button data-selects="flattened">Flattened</button>
          <button data-selects="turtle">Turtle-star</button>
        </div>
        <pre class="compacted input selected" data-options="rdfstar=true" aria-busy="false"><code class="hljs">{
  "@context": {
    "@vocab": "ex:",
    "p1": {"@type": "@id"}
  },
  "@id": "ex:s",
  "p": {
    "@id": "ex:o",
    "@annotation": {
      "r": {
        "@id": {"@id": "ex:s1", "p1": "ex:o1"}
      }
    }
  }
}</code></pre>
        <pre class="expanded" data-options="rdfstar=true" data-result-for="Annotating an annotation-compacted" aria-busy="false"><code class="hljs">[{
  "@id": "ex:s",
  "ex:p": [{
    "@id": "ex:o",
    "@annotation": [{
      "ex:r": [{
        "@id": {
          "@id": "ex:s1",
          "ex:p1": [{"@id": "ex:o1"}]
        }
      }]
    }]
  }]
}]</code></pre>
        <pre class="flattened" data-options="rdfstar=true" data-flatten="" data-result-for="Annotating an annotation-compacted" aria-busy="false"><code class="hljs">[{
  "@id": "ex:s",
  "ex:p": [{"@id": "ex:o"}]
}, {
  "@id": {
    "@id": "ex:s",
    "ex:p": [{"@id": "ex:o"}]
  },
  "ex:r": [{
    "@id": {
      "@id": "ex:s1",
      "ex:p1": [{"@id": "ex:o1"}]
    }
  }]
}]</code></pre>
        <pre class="turtle" data-content-type="text/turtle" data-options="rdfstar=true,canonicalize=true" data-to-rdf="" data-result-for="Annotating an annotation-compacted" aria-busy="false"><code class="hljs">@prefix : &lt;ex:&gt; .

:s :p :o {| :r &lt;&lt;:s1 :p1 :o1&gt;&gt; |} .</code></pre>
      </aside>

      <p>More examples can be found in the <cite><a href="https://json-ld.github.io/json-ld-star/tests/">JSON-LD-star Test Suite</a></cite>.</p>
    </section>
  </section>

  <section id="data-model">
    <h2 id="x6-data-model"><bdi class="secno">6. </bdi>Data Model<a class="self-link" aria-label="§" href="#data-model"></a></h2>

    <p>The <a href="https://www.w3.org/TR/json-ld11/#data-model">JSON-LD Data Model</a> is extended consistent with [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdfstar" title="RDF-star and SPARQL-star">RDFStar</a></cite>]:</p>
    <ul>
      <li>In addition to an <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2"><abbr title="Internationalized Resource Identifier">IRI</abbr></a>, <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node">blank node</a>, or <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-literal">literal</a>, a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-node">node</a> may itself be an <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-16">embedded node</a>.</li>
      <li>In addition to an <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2"><abbr title="Internationalized Resource Identifier">IRI</abbr></a> or <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier">blank node identifier</a>,
        the <code>@id</code> of a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a> may be an <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-17">embedded node</a>.</li>
      <li>The <code>@id</code> of an <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-18">embedded node</a> may also be another <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-19">embedded node</a>.</li>
      <li>A <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a> or <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-value-object">value object</a> which is the value of some other node object may
        include an <a href="#dfn-annotation-object" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-annotation-object-11">annotation object</a>.</li>
    </ul>

    <p><a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-20">Embedded Nodes</a> can be considered as <a href="https://www.w3.org/TR/rdf-primer/#reification">reified</a> <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple">triples</a>.</p>
    <div class="note" id="issue-container-generatedID-0"><div role="heading" class="ednote-title marker" id="h-ednote" aria-level="3"><span>Editor's note</span></div><p class="">Align with [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdfstar" title="RDF-star and SPARQL-star">RDFStar</a></cite>].</p></div>
  </section>

  <section id="grammar-extensions">
    <h2 id="x7-grammar-extensions"><bdi class="secno">7. </bdi>Grammar Extensions<a class="self-link" aria-label="§" href="#grammar-extensions"></a></h2>

    <p>The <a href="https://www.w3.org/TR/json-ld11/#json-ld-grammar">JSON-LD 1.1</a> is extended as follows:</p>
    <ul>
      <li>The value of <code>@id</code> within a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a> <em class="rfc2119">MUST</em> be an <abbr title="Internationalized Resource Identifier">IRI</abbr> reference,
        a compact <abbr title="Internationalized Resource Identifier">IRI</abbr> (including <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier">blank node identifiers</a>) or an <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-21">embedded node</a>.</li>
      <li>An <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-22">embedded node</a> is a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a> which <em class="rfc2119">MUST</em> describe a single relationship.
        <ul>
          <li>The restrictions on <code>@id</code> are identical to those of a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a>.</li>
          <li>An <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-23">embedded node</a> <em class="rfc2119">MUST NOT</em> contain any of the following <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-keyword">keywords</a> (or alias of such a keywords):
            <code>@included</code>, or <code>@graph</code>.</li>
          <li>If the <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-24">embedded node</a> contains <code>@type</code> (or an alias), it <em class="rfc2119">MUST</em> have a single value
            and the node <em class="rfc2119">MUST NOT</em> contain any other non-keyword <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entries</a>.</li>
          <li>If the <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-25">embedded node</a> does not contain <code>@type</code> (or an alias),
            it <em class="rfc2119">MUST</em> have another <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a> (aside from <code>@id</code>) which describes a relationship,
            such as an <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc3987#section-2"><abbr title="Internationalized Resource Identifier">IRI</abbr></a>, <code>@reverse</code> having a single value, or <code>@nest</code> which ultimately
            resolves to a single property/value relationship.</li>
        </ul>
      </li>
      <li>A <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a> or a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-value-object">value object</a> <em class="rfc2119">MAY</em> contain an <code>@annotation</code> property (or an alias) referencing
        zero or more <a href="#dfn-annotation-object" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-annotation-object-12">annotation objects</a>.</li>
      <li>A <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a> which is not the value of a non-keyword property,
        or which is an value of a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-list-object">list object</a>,
        <em class="rfc2119">MUST NOT</em> contain an <code>@annotation</code> property.</li>
      <li>An <a href="#dfn-annotation-object" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-annotation-object-13">annotation object</a> is a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node object</a> with the restriction
        that it <em class="rfc2119">MUST NOT</em> contain an <code>@id</code> (or an alias) <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a>.</li>
    </ul>
  </section>

  <section id="algorithmic-extensions">
    <h2 id="x8-algorithmic-extensions"><bdi class="secno">8. </bdi>Algorithmic Extensions<a class="self-link" aria-label="§" href="#algorithmic-extensions"></a></h2>

    <p>This specification extends the algorithms from <cite><a href="https://www.w3.org/TR/json-ld11-api/">JSON-LD 1.1 Processing Algorithms and API</a></cite> [<cite><a class="bibref" data-link-type="biblio" href="#bib-json-ld11-api" title="JSON-LD 1.1 Processing Algorithms and API">JSON-LD11-API</a></cite>]
      to support the addition of <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-26">embedded nodes</a> and <a href="#dfn-annotation-object" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-annotation-object-14">annotation objects</a>.</p>

    <p>The following algorithm extensions require that the <em>rdfstar</em> flag be set.</p>

    <section id="expansion-algorithm">
      <h3 id="x8-1-expansion-algorithm"><bdi class="secno">8.1 </bdi>Expansion Algorithm<a class="self-link" aria-label="§" href="#expansion-algorithm"></a></h3>

      <p>The algorithm has minor updates to allow for an <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-27">embedded node</a> to be used as the value of <code>@id</code>,
        and to allow and validate the special requirements for <a href="#dfn-annotation-object" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-annotation-object-15">annotation objects</a>.</p>

      <div class="note" role="note" id="issue-container-generatedID-1"><div role="heading" class="note-title marker" id="h-note-0" aria-level="4"><span>Note</span></div><p class="">Expansion does not change annotations into <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-28">embedded nodes</a>,
        neither does it reverse node relationships.
        This is performed by other algorithms.</p></div>

      <p>Before step 13.4.3.1, and changing 13.4.3.1 to be an "Otherwise, if",
        add the following steps:</p>
      <ol>
        <li>If the <em>rdfstar</em> flag is not set,
          and <var>active property</var> is <code>@annotation</code>,
          an <em>invalid annotation</em> error has been detected and processing is aborted.</li>
        <li>If <var>value</var> is a non-empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a> and
          the <em>rdfstar</em> flag is set,
          set <var>expanded value</var> to the result of using this algorithm recursively
          passing <var>active context</var>, <code>null</code> for <var>active property</var>,
          <var>value</var> for <var>element</var>, <var>base URL</var>,
          and the <em>frameExpansion</em> and <em>ordered</em> flags.
          The resulting expanded value <em class="rfc2119">MUST</em> BE a valid <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-29">embedded node</a>, otherwise,
          an <em>invalid embedded node</em> error has been detected and processing is aborted.</li>
      </ol>

      <p>After step 13.4.14 add the following step:</p>

      <ol>
      <li>If <var>expanded property</var> is `@annotation:
        <ol>
        <li>Continue with the next key from <var>element</var> if the <em>rdfstar</em> flag is not set.</li>
        <li>Set <var>expanded value</var> to the result of using this algorithm recursively
          passing <var>active context</var>, <code>@annotation</code> for <var>active property</var>,
          <var>value</var> for element, <var>base URL</var>,
          and the <em>frameExpansion</em> and <em>ordered</em> flags.</li>
        </ol>
      </li>
      </ol>

      <p>Step 15.1 extends the set of allowed <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entries</a> to include <code>@annotation</code>.</p>

      <p>Before <a href="https://www.w3.org/TR/json-ld11-api/#alg-expand-only-language">step 18</a> add the following step:</p>
      <ol>
      <li>If <var>result</var> contains the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a> <code>@annotation</code>
        all associated values <em class="rfc2119">MUST</em> BE <a href="#dfn-annotation-object" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-annotation-object-16">annotation objects</a>, otherwise,
        an <em>invalid annotation</em> error has been detected and processing is aborted.
        Additionally, if there is no <var>active property</var>,
        or <var>active property</var> is <code>@graph</code> or <code>@included</code>,
        the annotation appears in an inappropriate location and
        an <em>invalid annotation</em> error has been detected and processing is aborted.
      </li>
      </ol>
    </section>

    <section id="compaction-algorithm" class="algorithm">
      <h3 id="x8-2-compaction-algorithm"><bdi class="secno">8.2 </bdi>Compaction Algorithm<a class="self-link" aria-label="§" href="#compaction-algorithm"></a></h3>

      <p>The <a href="https://www.w3.org/TR/json-ld11-api/#compaction-algorithm">Compaction Algorithm</a> has minor updates to allow for an <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-30">embedded node</a> to be used as the value of <code>@id</code>,
        and to allow <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-31">embedded nodes</a> and <a href="#dfn-annotation-object" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-annotation-object-17">annotation objects</a>.
        Values that might otherwise be serialized as a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#javascript-string">string</a> must stay
        as a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a> if they contain an <a href="#dfn-annotation-object" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-annotation-object-18">annotation object</a>.</p>

      <p>Step 7 is updated to exclude elements haveing an <code>@annotation</code> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a>.</p>

      <p>After step 12.1.1, add the following steps:</p>
      <ol>
        <li>Otherwise, if <var>expanded value</var> is an <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-32">embedded node</a>,
          initialize <var>compacted value</var> with the result of calling
          this algorithm, recursively,
          passing <var>active context</var>,
          <code>null</code> for <var>active property</var>,
          <var>expanded value</var> for <var>element</var>,
          and the <a href="https://www.w3.org/TR/json-ld11-api/#dom-jsonldoptions-compactarrays">compactArrays</a> and <a href="https://www.w3.org/TR/json-ld11-api/#dom-jsonldoptions-ordered">ordered</a> flags.
        </li>
      </ol>
    </section>

    <section id="flattening-algorithms">
      <h3 id="x8-3-flattening-algorithms"><bdi class="secno">8.3 </bdi>Flattening Algorithms<a class="self-link" aria-label="§" href="#flattening-algorithms"></a></h3>

      <p>The flattening algorithms are updated to allow the use
        of <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-33">embedded nodes</a>, and to turn <a href="#dfn-annotation-object" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-annotation-object-19">annotation objects</a>
        into <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-34">embedded nodes</a>.</p>

      <p>There is a new <a href="#create-annotations">Create Annotations Algorithm</a>
        optionally invoked using the <em>createAnnotations</em> API flag,
        which will re-create most <a href="#dfn-annotation-object" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-annotation-object-20">annotation objects</a> within
        a node map.</p>

      <section id="flattening-algorithm" class="algorithm">
        <h4 id="x8-3-1-flattening-algorithm"><bdi class="secno">8.3.1 </bdi>Flattening Algorithm<a class="self-link" aria-label="§" href="#flattening-algorithm"></a></h4>
        <p>The main changes to the
          <a href="https://www.w3.org/TR/json-ld11-api/#flattening-algorithm">Flattening Algorithm</a> is to move the
          <a href="https://www.w3.org/TR/json-ld11-api/#generate-blank-node-identifier">blank node regeneration</a>
          to a single recursive step run prior to
          running the <a href="#node-map-generation">Node Map Generation</a> algorithm.
          This is required to consistently regenerate <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier">blank node identifiers</a>
          used within embedded nodes, which are otherwise untouched
          by the algorithm.</p>

        <p>Before step 2 add the following step:</p>
        <ol>
          <li>Update <var>element</var> using the <a href="#rename-blank-nodes">Rename Blank Nodes</a> algorithm
            passing <var>element</var>.</li>
        </ol>

        <p>Before step 3 add the following step:</p>
        <ol>
          <li>If the <em>createAnnotations</em> flag is set:
            <ol>
              <li>For each key-value pair
                <var>graph name</var>-<var>graph</var> in <var>node map</var>,
                perform the following steps:
                <ol>
                  <li>Update <var>graph</var> in <var>node map</var>
                    by invoking the
                    <a href="#create-annotations">Create Annotations Algorithm</a>
                    passing <var>graph</var> for <var>node map</var>.</li>
                </ol>
              </li>
            </ol>
          </li>
        </ol>
      </section>

      <section id="node-map-generation" class="algorithm">
        <h4 id="x8-3-2-node-map-generation"><bdi class="secno">8.3.2 </bdi>Node Map Generation<a class="self-link" aria-label="§" href="#node-map-generation"></a></h4>
        <p><a href="https://www.w3.org/TR/json-ld11-api/#algorithm-10">Node Map Generation Algorithm</a>
          has significant updates due to the requirements of
          unfolding <a href="#dfn-annotation-object" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-annotation-object-21">annotation objects</a> into <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-35">embedded nodes</a> and representing
          <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-36">embedded nodes</a> as keys in the <var>node map</var>.
          Also, some assumptions are made in the original algorithm
          that the <var>active subject</var> being a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a> implies a reverse
          relationship, which is no longer the case when an <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-37">embedded node</a>
          may be the <var>active subject</var>.</p>

        <p>Principle changes include the following:</p>
        <ul>
          <li>As indicated in <a href="#flattening-algorithm" class="sectionRdf sec-ref">§&nbsp;<bdi class="secno">8.3.1 </bdi>Flattening Algorithm</a>,
            most <a href="https://www.w3.org/TR/json-ld11-api/#generate-blank-node-identifier">blank node regeneration</a>
            is performed prior to invoking this algorithm,
            rather than inline.
            The exception is for <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-object">node objects</a> without an explicit <code>@id</code>,
            and where a blank node is used as a property.</li>
          <li>A new argument <var>reverse</var> is introduced which is
            passed when processing an <code>@reverse</code> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a>.</li>
          <li>If an <code>@annotation</code> key is encountered, it creates an
            <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-38">embedded node</a> based on the <var>active subject</var> and
            the map containing the <code>@annotation</code> key which is used
            in a recursive invokation of this algorithm on the
            contents of the <var>annotation object</var>.</li>
          <li>If the active subject is an <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-39">embedded node</a>, the
            result of the <cite><a href="https://tools.ietf.org/html/rfc8785">JSON Canonicalization Scheme (JCS)</a></cite> [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8785" title="JSON Canonicalization Scheme (JCS)">RFC8785</a></cite>] is used as an
            index into the <var>node map</var>.</li>
        </ul>

        <p>A new optional parameter <var>reverse</var> is added defaulting to <code>false</code>.</p>

        <p>In step 2, when referencing the <var>active subject</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a>
          of <var>graph</var>, if <var>active subject</var> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a>,
          index using the <a href="https://www.w3.org/TR/json-ld11-api/#dfn-canonical-lexical-form">canonical lexical form</a> of <var>active subject</var>.
          Additionally, do use <code>null</code> if <var>reverse</var> is <code>false</code>.</p>

        <p>Before step 4.1.1, ad the following steps:</p>
        <ol>
          <li>If <var>element</var> has an <code>@annotation</code> entry:
            <ol>
              <li>Initialize <var>annotation subject</var> as a new
                <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a> with an entry for <code>@id</code> taken from <var>active subject</var>.
                If <var>active subject</var> is a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-reference">node reference</a>,
                use value of <code>@id</code> from <var>active subject</var>.</li>
              <li>Add an entry for <var>active property</var> with the value
                an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list">array</a> containing <var>element</var>,
                after removing the <code>@annotation</code> value from <var>element</var>.</li>
              <li>Initialize <var>annotation</var> as an array containing the values
                from the <code>@annotation</code> entry in <var>element</var> adding
                an <code>@id</code> entry to each with the value <var>annotation subject</var>.</li>
              <li>Recursively call this algorithm passing <var>annotation</var> for <var>element</var>,
                <var>node map</var>, and <var>active graph</var>.</li>
            </ol>
          </li>
        </ol>

        <p>Replace 6.3 and 6.4 with the following steps:</p>
        <ol>
          <li>If <var>id</var> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a>, set <var>serialized id</var>
            to the <a href="https://www.w3.org/TR/json-ld11-api/#dfn-canonical-lexical-form">canonical lexical form</a>
            of <var>id</var>, otherwise to <var>id</var>.</li>
          <li>If <var>graph</var> does not contain an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a> <var>serialized id</var>,
            create one and initialize its value to a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a> consisting of
            a single <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a> <code>@id</code> whose
            value is <var>id</var>.</li>
          <li>Reference the value of the <var>serialized id</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a> of <var>graph</var> using the
            variable <var>node</var>.</li>
        </ol>

        <p>Change the condition for step 6.5 to check the <var>reverse</var> 
          parameter for <code>true</code> rather than if <var>active subject</var> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a>.</p>

        <p>Before step 6.8, ad the following steps:</p>
        <ol>
          <li>If <var>element</var> has an <code>@annotation</code> entry:
            <ol>
              <li>Initialize <var>annotation subject</var> as a new
                <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a>.
              </li><li>If <var>reverse</var> is <code>true</code>:
                <ol>
                  <li>Add an entry for <code>@id</code> with the value <var>id</var>.</li>
                  <li>Add an entry for <var>active property</var>
                    with the value from <var>active subject</var>.
                    If <var>active subject</var> is a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-reference">node reference</a>,
                    use value of <code>@id</code> from <var>active subject</var>.</li>
                </ol>
              </li>
              <li>Otherwise:
                <ol>
                  <li>Add an entry for <code>@id</code> taken from <var>active subject</var>.
                    If <var>active subject</var> is a <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11/#dfn-node-reference">node reference</a>,
                    use value of <code>@id</code> from <var>active subject</var>.</li>
                  <li>Add an entry for <var>active property</var>
                    with the value <var>id</var>.</li>
                </ol>
              </li>
              <li>Initialize <var>annotation</var> as an array containing the values
                from the <code>@annotation</code> entry in <var>element</var> adding
                an <code>@id</code> entry to each with the value <var>annotation subject</var>.</li>
              <li>Recursively call this algorithm passing <var>annotation</var> for <var>element</var>,
                <var>node map</var>, and <var>active graph</var>.</li>
            </ol>
          </li>
        </ol>

        <p>Update step 6.9.3.1.1 to include a <var>reverse</var>
          parameter with the value <code>true</code>.</p>
      </section>

      <section id="rename-blank-nodes" class="algorithm">
        <h4 id="x8-3-3-rename-blank-nodes"><bdi class="secno">8.3.3 </bdi>Rename Blank Nodes<a class="self-link" aria-label="§" href="#rename-blank-nodes"></a></h4>
        <p>This algorithm use used to comprehensively rename the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier">blank node identifiers</a>
          used within a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a> by recursively visiting each element of the map.</p>
        <div class="note" role="note" id="issue-container-generatedID-2"><div role="heading" class="note-title marker" id="h-note-1" aria-level="5"><span>Note</span></div><p class="">This will change the naming of renamed blank nodes used
          in existing tests. As indicated in the
          <a href="https://w3c.github.io/json-ld-api/tests/">JSON-LD Test Suite</a>:</p></div>
        <blockquote>
          When comparing documents after flattening, framing or generating RDF,
          blank node identifiers may not be predictable. 
        </blockquote>
        <p>One way to do this is to transform both the generated results and
          the expected results into an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset">RDF Dataset</a> and perform a blank node
          bijection (as described for <a href="https://www.w3.org/TR/rdf11-concepts/#dfn-dataset-isomorphism">RDF Dataset Isomorphsim</a>) and then
          use the resulting bijection to rename the blank nodes in the result
          based on those that are expected.</p>

          <p>The algorithm takes a single input variable <var>element</var>
            and returns a representation of that <var>element</var>
            with <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier">blank node identifiers</a> remapped.</p>

          <ol>
            <li>If <var>element</var> is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list">array</a>:
              <ol>
                <li>Initialize an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list">array</a> <var>result</var>.</li>
                <li>For each <var>item</var> in <var>element</var>
                  add the result of invoking this algorithm recursively
                  passing <var>item</var> for <var>element</var>.
                </li>
              </ol>
            </li>
            <li>Otherwise, if <var>element</var> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a>:
              <ol>
                <li>Initialize an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a> <var>result</var>.</li>
                <li>For each <var>key</var>-<var>value</var> pair in <var>element</var>:
                  <ol>
                    <li>If <var>key</var> is <code>@id</code> and <var>value</var> if a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier">blank node identifier</a>,
                      add an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a> to <var>result</var> for <code>@id</code> with the value from the result of the
                      <a href="https://www.w3.org/TR/json-ld11-api/#generate-blank-node-identifier">Generate Blank Node Identifier algorithm</a>
                      passing <var>value</var> for <var>identifier</var>.</li>
                    <li>Otherwise, add an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a> to <var>result</var> for <code>@id</code>
                      with the value from the result of calling this algorithm recursively
                      using <var>value</var> for <var>element</var>.</li>
                  </ol>
                </li>
              </ol>
            </li>
            <li>Otherwise, set <var>result</var> to <var>element</var></li>
          </ol>

          <p>Return <var>result</var>.</p>
      </section>

      <section id="create-annotations" class="algorithm">
        <h4 id="x8-3-4-create-annotations"><bdi class="secno">8.3.4 </bdi>Create Annotations<a class="self-link" aria-label="§" href="#create-annotations"></a></h4>

        <p>This algorithm is used to find entries in a <em>node map</em> where
          the key is a canonicalized <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-40">embedded node</a> and that
          <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-41">embedded node</a> exists in non-embedded form
          in the <em>node map</em>
          and move them to be <a href="#dfn-annotation-object" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-annotation-object-22">annotation objects</a> under that node.
          This effectively reverses the process of unfolding
          <a href="#dfn-annotation-object" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-annotation-object-23">annotation objects</a> performed in
          <a href="#node-map-generation" class="sectionRef sec-ref">§&nbsp;<bdi class="secno">8.3.2 </bdi>Node Map Generation</a>.
          It is also used in <a href="#serialize-rdf-as-json-ld" class="sectionRef sec-ref">§&nbsp;<bdi class="secno">8.4.3 </bdi>Serialize RDF as JSON-LD Algorithm</a>.</p>

        <p>The algorithm takes a single input variable <var>node map</var>
          and updates it in place.</p>

        <ol>
          <li>For each <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a> <var>key</var>/<var>annotation</var> in <var>node map</var>,
            where the first character of <var>key</var>
            is an <code>OPEN BRACE</code> (<code>{</code>), ordered by decreasing length:
            <ol>
              <li>Initialize <var>embedded</var> from the value
                for the <code>@id</code> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a> of <var>annotation</var>.</li>
              <li>Initialize <var>id</var> with the value of the <code>@id</code>
                entry from <var>embedded</var>, using the
                <a href="https://www.w3.org/TR/json-ld11-api/#dfn-canonical-lexical-form">canonical lexical form</a>
                if it is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a>.</li>
              <li>Initialize <var>node</var> to the entry for <var>id</var>
                in <var>node map</var>. If there is no such <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a>,
                continue to the next <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a> in <var>node map</var>.</li>
              <li>Besides <code>@id</code>, <var>embedded</var> will have exactly one <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a>.
                Initialize <var>property</var> and <var>value</var>
                to the key and the first value
                from that <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a>.</li>
              <li>If <var>node</var> has an entry for <var>property</var>
                with a value <var>value</var>:
                <ol>
                  <li>Remove the <var>key</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a>
                    from <var>node map</var>.</li>
                  <li>Remove the <code>@id</code> <var>entry</var>
                    from <var>annotation</var>.</li>
                  <li>Use <a data-link-type="dfn" href="https://www.w3.org/TR/json-ld11-api/#dfn-add-value">add value</a> to add <var>annotation</var> to the property <var>property</var> in <var>node</var>, using <code>true</code> for <em>as array</em>.</li>
                </ol>
              </li>
            </ol>
          </li>
          <li>Return <var>node map</var>.</li>
        </ol>
      </section>
    </section>

    <section id="rdf-serialization-deserialization-algorithms">
      <h3 id="x8-4-rdf-serialization-deserialization-algorithms"><bdi class="secno">8.4 </bdi>RDF Serialization/Deserialization Algorithms<a class="self-link" aria-label="§" href="#rdf-serialization-deserialization-algorithms"></a></h3>

      <p>The RDF transformation algorithms have minimal changes to allow
        emit and consume <a data-link-type="dfn" href="https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html#dfn-triple">RDF-star triples</a>.</p>

      <section id="deserialize-json-ld-to-rdf-algorithm" class="algorithm">
        <h4 id="x8-4-1-deserialize-json-ld-to-rdf-algorithm"><bdi class="secno">8.4.1 </bdi>Deserialize JSON-LD to RDF Algorithm<a class="self-link" aria-label="§" href="#deserialize-json-ld-to-rdf-algorithm"></a></h4>

        <p>The <a href="https://www.w3.org/TR/json-ld11-api/#deserialize-json-ld-to-rdf-algorithm">Deserialize JSON-LD to RDF Algorithm</a>
          has minimal changes to allow
          an <a data-link-type="dfn" href="https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html#dfn-embedded-triple">embedded triple</a> to be used as the subject or object of
          an <a data-link-type="dfn" href="https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html#dfn-triple">RDF-star triple</a>,
          and to use <a href="#dfn-annotation-object" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-annotation-object-24">annotation objects</a>, where appropriate.</p>

        <p>After step 1.3.1 add the following step:</p>
        <ol>
          <li>If <var>subject</var> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#javascript-string">string</a> with the
            form of an <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-42">embedded node</a>. Transform it into an <a data-link-type="dfn" href="https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html#dfn-triple">RDF-star triple</a>
            using the <a href="#object-to-rdf-algorithm">Object to RDF Algorithm</a>
            passing <var>subject</var> as <var>item</var>.</li>
        </ol>
      </section>

      <section id="object-to-rdf-algorithm" class="algorithm">
        <h4 id="x8-4-2-object-to-rdf-algorithm"><bdi class="secno">8.4.2 </bdi>Object to RDF Algorithm<a class="self-link" aria-label="§" href="#object-to-rdf-algorithm"></a></h4>

        <p>The <a href="https://www.w3.org/TR/json-ld11-api/#object-to-rdf">Object to RDF</a> algorithm
          has a minimal update to allow a serialized <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-43">embedded node</a> to be transformed
          into an <a data-link-type="dfn" href="https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html#dfn-triple">RDF-star triple</a> by invoking the
          <a href="#deserialize-json-ld-to-rdf-algorithm">Deserialize JSON-LD to RDF Algorithm</a>
          recursively.</p>

        <p>The first argument <em class="rfc2119">MAY</em> be an <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-44">embedded node</a> in
          <a href="https://www.w3.org/TR/json-ld11-api/#dfn-canonical-lexical-form">canonical lexical form</a>.</p>

        <p>Before Step 4 add the following steps:</p>
        <ol>
          <li>If <var>item</var> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#javascript-string">string</a> where the first character
            is an <code>OPEN BRACE</code> (<code>{</code>) it <em class="rfc2119">MUST</em> represent a serialized <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-45">embedded node</a>:
            <ol>
              <li>Initialize <var>dataset</var> as a new empty <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset">RDF dataset</a>.</li>
              <li>Transform <var>item</var> into a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a> by deserializing
                <var>item</var> as JSON.</li>
              <li>Invoke the <a href="#object-to-rdf-algorithm">Object to RDF Algorithm</a>
                passing a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a> with the entry <code>@default</code> and
                value a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a> with a new entry using
                the value of <code>@id</code> from <var>entry</var> as key and <var>entry</var>
                as value. If the value of <code>@id</code> is not a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#javascript-string">string</a>,
                use the <a href="https://www.w3.org/TR/json-ld11-api/#dfn-canonical-lexical-form">canonical lexical form</a>
                as the key.</li>
              <li>The only entry in <var>dataset</var> will be a single
                <a data-link-type="dfn" href="https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html#dfn-triple">RDF-star triple</a> in the <a href="https://www.w3.org/TR/json-ld11-api/#dom-rdfdataset-defaultgraph">defaultGraph</a>.
                Return that <a data-link-type="dfn" href="https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html#dfn-triple">RDF-star triple</a>.</li>
            </ol>
          </li>
        </ol>
      </section>

      <section id="serialize-rdf-as-json-ld" class="algorithm">
        <h4 id="x8-4-3-serialize-rdf-as-json-ld-algorithm"><bdi class="secno">8.4.3 </bdi>Serialize RDF as JSON-LD Algorithm<a class="self-link" aria-label="§" href="#serialize-rdf-as-json-ld"></a></h4>

        <p>The <a href="https://www.w3.org/TR/json-ld11-api/#serialize-rdf-as-json-ld">Serialize RDF as JSON-LD Algorithm</a> algorithm
          has updates to transform <a data-link-type="dfn" href="https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html#dfn-triple">RDF-star triples</a> used as
          the subject or object of another triple to be used as the index
          into a <em>node map</em> and represented as <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-46">embedded nodes</a>.</p>

        <p>Change step 5.7.1 to the following steps:</p>
        <ol>
          <li>If <var>subject</var> is an <a data-link-type="dfn" href="https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html#dfn-triple">RDF-star triple</a>:
            <ol>
              <li>Set <var>embedded subject</var> to the
                value of the <code>@id</code> entry from the
                result of using
                the <a href="#rdf-to-object-conversion">RDF to Object Conversion algorithm</a>
                passing <var>subject</var>.</li>
              <li>Set <var>subject index</var> to the result of using
                the <a href="https://www.w3.org/TR/json-ld11-api/#dfn-canonical-lexical-form">canonical lexical form</a>
                of <var>embedded subject</var>.</li>
              <li>If <var>node map</var> does not have a <var>subject index</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a>,
                create one and initialize its value to a new <a class="changed" data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a>
                consisting of a single <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a> <code>@id</code> whose value is
                set to <var>embedded subject</var>.</li>
            </ol>
          </li>
          <li>Otherwise, if <var>node map</var> does not have a <var>subject</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a>,
            create one and initialize its value to a new <a class="changed" data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a>
            consisting of a single <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a> <code>@id</code> whose value is
            set to <var>subject</var>.</li>
        </ol>

        <p>Before step 5.7.4, add the following steps:</p>
        <ol>
          <li>If <var>object</var> is an <a data-link-type="dfn" href="https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html#dfn-triple">RDF-star triple</a>:
            <ol>
              <li>Set <var>embedded object</var> to the
                value of the <code>@id</code> entry from the
                result of using
                the <a href="#rdf-to-object-conversion">RDF to Object Conversion algorithm</a>
                passing <var>object</var>.</li>
              <li>Set <var>object index</var> to the result of using
                the <a href="https://www.w3.org/TR/json-ld11-api/#dfn-canonical-lexical-form">canonical lexical form</a>
                of <var>embedded object</var>.</li>
              <li>If <var>node map</var> does not have an <var>object index</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a>,
                create one and initialize its value to a new <a class="changed" data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a>
                consisting of a single <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a> <code>@id</code> whose value is
                set to <var>embedded object</var>.</li>
            </ol>
          </li>
        </ol>

        <p>After step 6.4, add the following steps:</p>
        <ol>
          <li>Update <var>graph object</var> in <var>graph map</var>
            by invoking the
            <a href="#create-annotations">Create Annotations Algorithm</a>
            passing <var>graph object</var> for <var>node map</var>.</li>
        </ol>
      </section>

      <section id="rdf-to-object-conversion" class="algorithm">
        <h4 id="x8-4-4-rdf-to-object-conversion"><bdi class="secno">8.4.4 </bdi>RDF to Object Conversion<a class="self-link" aria-label="§" href="#rdf-to-object-conversion"></a></h4>

        <p>The <a href="https://www.w3.org/TR/json-ld11-api/#rdf-to-object-conversion">RDF to Object Conversion</a> algorithm
          has updates to transform <a data-link-type="dfn" href="https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html#dfn-triple">RDF-star triples</a> into an <a href="#dfn-embedded-node" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-node-47">embedded node</a>.</p>

        <p>Before step 2, add the following steps:</p>
        <ol>
          <li>Otherewise, if <var>value</var> is an <a data-link-type="dfn" href="https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html#dfn-triple">RDF-star triple</a>:
            <ol>
              <li>Create a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map">map</a> <var>embedded node</var>
                with the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry">entry</a> <code>@id</code> whose value
                is the result of calling this algorithm, recursively,
                passing the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-subject">subject</a> from <var>value</var>.</li>
              <li>If the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-predicate">predicate</a> from <var>value</var> is <code>rdf:type</code>,
                and the <a href="https://www.w3.org/TR/json-ld11-api/#dom-jsonldoptions-userdftype">useRdfType</a> flag is not <code>true</code>,
                add an entry for <code>@type</code> whose value
                is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list">array</a> containing the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-object">object</a> from <var>value</var>.</li>
              <li>Otherwise, add an entry for <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-predicate">predicate</a> whose value
                is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list">array</a> containing the result of calling this algorithm,
                recursively,
                passing the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-object">object</a> from <var>value</var>.</li>
            </ol>
          </li>
          <li>Return <var>embedded node</var>.</li>
        </ol>
      </section>
    </section>
  </section>
 

<section id="references" class="appendix"><h2 id="a-references"><bdi class="secno">A. </bdi>References<a class="self-link" aria-label="§" href="#references"></a></h2><section id="normative-references">
    <h3 id="a-1-normative-references"><bdi class="secno">A.1 </bdi>Normative references<a class="self-link" aria-label="§" href="#normative-references"></a></h3>
    <dl class="bibliography"><dt id="bib-infra">[INFRA]</dt><dd><a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Anne van Kesteren; Domenic Denicola.  WHATWG. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a></dd><dt id="bib-json-ld11">[JSON-LD11]</dt><dd><a href="https://www.w3.org/TR/json-ld11/"><cite>JSON-LD 1.1</cite></a>. Gregg Kellogg; Pierre-Antoine Champin; Dave Longley.  W3C. 16 July 2020. W3C Recommendation. URL: <a href="https://www.w3.org/TR/json-ld11/">https://www.w3.org/TR/json-ld11/</a></dd><dt id="bib-json-ld11-api">[JSON-LD11-API]</dt><dd><a href="https://www.w3.org/TR/json-ld11-api/"><cite>JSON-LD 1.1 Processing Algorithms and API</cite></a>. Gregg Kellogg; Dave Longley; Pierre-Antoine Champin.  W3C. 16 July 2020. W3C Recommendation. URL: <a href="https://www.w3.org/TR/json-ld11-api/">https://www.w3.org/TR/json-ld11-api/</a></dd><dt id="bib-rdf-primer">[rdf-primer]</dt><dd><a href="https://www.w3.org/TR/rdf-primer/"><cite>RDF Primer</cite></a>. Frank Manola; Eric Miller.  W3C. 10 February 2004. W3C Recommendation. URL: <a href="https://www.w3.org/TR/rdf-primer/">https://www.w3.org/TR/rdf-primer/</a></dd><dt id="bib-rdf11-concepts">[RDF11-CONCEPTS]</dt><dd><a href="https://www.w3.org/TR/rdf11-concepts/"><cite>RDF 1.1 Concepts and Abstract Syntax</cite></a>. Richard Cyganiak; David Wood; Markus Lanthaler.  W3C. 25 February 2014. W3C Recommendation. URL: <a href="https://www.w3.org/TR/rdf11-concepts/">https://www.w3.org/TR/rdf11-concepts/</a></dd><dt id="bib-rdfstar">[RDFStar]</dt><dd><a href="https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html"><cite>RDF-star and SPARQL-star</cite></a>. Olaf Hartig; Pierre-Antoine Champin.  W3C. 2021-02-18. W3C CG Draft. URL: <a href="https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html">https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html</a></dd><dt id="bib-rfc2119">[RFC2119]</dt><dd><a href="https://tools.ietf.org/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. S. Bradner.  IETF. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a></dd><dt id="bib-rfc3987">[RFC3987]</dt><dd><a href="https://tools.ietf.org/html/rfc3987"><cite>Internationalized Resource Identifiers (IRIs)</cite></a>. M. Duerst; M. Suignard.  IETF. January 2005. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc3987">https://tools.ietf.org/html/rfc3987</a></dd><dt id="bib-rfc8174">[RFC8174]</dt><dd><a href="https://tools.ietf.org/html/rfc8174"><cite>Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</cite></a>. B. Leiba.  IETF. May 2017. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc8174">https://tools.ietf.org/html/rfc8174</a></dd><dt id="bib-rfc8785">[RFC8785]</dt><dd><a href="https://tools.ietf.org/html/rfc8785"><cite>JSON Canonicalization Scheme (JCS)</cite></a>. A. Rundgren; B. Jordan; S. Erdtman.  IETF. June 2020. Informational. URL: <a href="https://tools.ietf.org/html/rfc8785">https://tools.ietf.org/html/rfc8785</a></dd></dl>
  </section><section id="informative-references">
    <h3 id="a-2-informative-references"><bdi class="secno">A.2 </bdi>Informative references<a class="self-link" aria-label="§" href="#informative-references"></a></h3>
    <dl class="bibliography"><dt id="bib-bcp47">[BCP47]</dt><dd><a href="https://tools.ietf.org/html/bcp47"><cite>Tags for Identifying Languages</cite></a>. A. Phillips; M. Davis.  IETF. September 2009. IETF Best Current Practice. URL: <a href="https://tools.ietf.org/html/bcp47">https://tools.ietf.org/html/bcp47</a></dd><dt id="bib-ecmascript">[ECMASCRIPT]</dt><dd><a href="https://tc39.es/ecma262/"><cite>ECMAScript Language Specification</cite></a>.  Ecma International. URL: <a href="https://tc39.es/ecma262/">https://tc39.es/ecma262/</a></dd><dt id="bib-json-ld">[JSON-LD]</dt><dd><a href="https://www.w3.org/TR/json-ld/"><cite>JSON-LD 1.0</cite></a>. Manu Sporny; Gregg Kellogg; Markus Lanthaler.  W3C. 3 November 2020. W3C Recommendation. URL: <a href="https://www.w3.org/TR/json-ld/">https://www.w3.org/TR/json-ld/</a></dd><dt id="bib-json-ld-star-tests">[JSON-LD-star-tests]</dt><dd><a href="https://json-ld.github.io/json-ld-star/tests/"><cite>JSON-LD-star Test Suite</cite></a>.  W3C. unofficial. URL: <a href="https://json-ld.github.io/json-ld-star/tests/">https://json-ld.github.io/json-ld-star/tests/</a></dd><dt id="bib-json-ld11-framing">[JSON-LD11-FRAMING]</dt><dd><a href="https://www.w3.org/TR/json-ld11-framing/"><cite>JSON-LD 1.1 Framing</cite></a>. Dave Longley; Gregg Kellogg; Pierre-Antoine Champin.  W3C. 16 July 2020. W3C Recommendation. URL: <a href="https://www.w3.org/TR/json-ld11-framing/">https://www.w3.org/TR/json-ld11-framing/</a></dd><dt id="bib-linked-data">[LINKED-DATA]</dt><dd><a href="https://www.w3.org/DesignIssues/LinkedData.html"><cite>Linked Data Design Issues</cite></a>. Tim Berners-Lee.  W3C. 27 July 2006. W3C-Internal Document. URL: <a href="https://www.w3.org/DesignIssues/LinkedData.html">https://www.w3.org/DesignIssues/LinkedData.html</a></dd><dt id="bib-rdf-schema">[RDF-SCHEMA]</dt><dd><a href="https://www.w3.org/TR/rdf-schema/"><cite>RDF Schema 1.1</cite></a>. Dan Brickley; Ramanathan Guha.  W3C. 25 February 2014. W3C Recommendation. URL: <a href="https://www.w3.org/TR/rdf-schema/">https://www.w3.org/TR/rdf-schema/</a></dd><dt id="bib-rfc8259">[RFC8259]</dt><dd><a href="https://tools.ietf.org/html/rfc8259"><cite>The JavaScript Object Notation (JSON) Data Interchange Format</cite></a>. T. Bray, Ed..  IETF. December 2017. Internet Standard. URL: <a href="https://tools.ietf.org/html/rfc8259">https://tools.ietf.org/html/rfc8259</a></dd><dt id="bib-webidl">[WEBIDL]</dt><dd><a href="https://heycam.github.io/webidl/"><cite>Web IDL</cite></a>. Boris Zbarsky.  W3C. 15 December 2016. W3C Editor's Draft. URL: <a href="https://heycam.github.io/webidl/">https://heycam.github.io/webidl/</a></dd></dl>
  </section></section><p role="navigation" id="back-to-top">
    <a href="#title"><abbr title="Back to Top">↑</abbr></a>
  </p><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-property-graph">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-property-graph">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-array">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-array">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-boolean">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-boolean">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-json-object">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-json-object">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-map">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-map">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-map-entry">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-map-entry">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-null">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-null">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-number">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-number">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-long">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-long">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-double">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-double">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-scalar">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-scalar">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-string">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-string">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-internationalized-resource-identifier">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-internationalized-resource-identifier">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-iri-reference">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-iri-reference">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-relative-iri-reference">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-relative-iri-reference">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-base-iri">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-base-iri">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-blank-node">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-blank-node">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-blank-node-identifier">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-blank-node-identifier">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-rdf-dataset">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-rdf-dataset">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-datatype-iri">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-datatype-iri">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-default-graph">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-default-graph">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-graph-name">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-graph-name">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-language-tagged-string">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-language-tagged-string">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-language-tag">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-language-tag">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-collection">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-collection">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-rdf-literal">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-rdf-literal">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-linked-data">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-linked-data">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-named-graph">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-named-graph">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-node">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-node">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-object">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-object">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-property">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-property">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-predicate">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-predicate">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-resource">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-resource">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-linked-data-graph">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-linked-data-graph">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-subject">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-subject">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-triple">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-triple">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-active-context">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-active-context">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-base-direction">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-base-direction">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-compact-iri">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-compact-iri">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-context">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-context">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-default-language">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-default-language">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-default-object">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-default-object">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-embedded-context">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-embedded-context">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-expanded-term-definition">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-expanded-term-definition">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-frame">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-frame">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-frame-object">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-frame-object">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-graph-object">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-graph-object">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-simple-graph-object">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-simple-graph-object">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-id-map">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-id-map">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-implicitly-named-graph">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-implicitly-named-graph">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-included-block">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-included-block">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-index-map">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-index-map">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-json-literal">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-json-literal">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-json-ld-document">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-json-ld-document">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-internal-representation">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-internal-representation">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-json-ld-processor">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-json-ld-processor">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-json-ld-value">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-json-ld-value">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-keyword">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-keyword">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-language-map">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-language-map">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-list-object">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-list-object">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-local-context">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-local-context">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-nested-property">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-nested-property">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-node-object">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-node-object">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-node-reference">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-node-reference">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-prefix">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-prefix">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-processing-mode">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-processing-mode">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-scoped-context">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-scoped-context">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-type-scoped-context">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-type-scoped-context">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-property-scoped-context">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-property-scoped-context">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-set-object">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-set-object">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-term">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-term">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-term-definition">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-term-definition">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-simple-term-definition">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-simple-term-definition">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-type-map">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-type-map">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-typed-value">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-typed-value">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-value-object">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-value-object">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-vocabulary-mapping">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-vocabulary-mapping">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-active-graph">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-active-graph">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-active-object">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-active-object">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-active-property">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-active-property">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-active-subject">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-active-subject">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-add-value">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-add-value">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-explicit-inclusion-flag">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-explicit-inclusion-flag">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-framing-state">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-framing-state">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-input-frame">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-input-frame">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-iri-compacting">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-iri-compacting">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-iri-expanding">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-iri-expanding">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-json-ld-input">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-json-ld-input">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-json-ld-output">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-json-ld-output">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-map-of-flattened-subjects">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-map-of-flattened-subjects">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-object-embed-flag">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-object-embed-flag">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-omit-default-flag">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-omit-default-flag">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-omit-graph-flag">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-omit-graph-flag">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-processor-state">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-processor-state">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-require-all-flag">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-require-all-flag">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-annotation-object">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-annotation-object">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
    <li>
    <a href="#ref-for-dfn-annotation-object-1">1. Introduction</a> 
  </li><li>
    <a href="#ref-for-dfn-annotation-object-2">3. JSON-LD-star-specific Terms</a> 
  </li><li>
    <a href="#ref-for-dfn-annotation-object-3">4. Basic Concepts</a> <a href="#ref-for-dfn-annotation-object-4">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-annotation-object-5">5. Advanced Concepts</a> 
  </li><li>
    <a href="#ref-for-dfn-annotation-object-6">5.3 Mixing Annotations and Embedded Nodes</a> <a href="#ref-for-dfn-annotation-object-7">(2)</a> <a href="#ref-for-dfn-annotation-object-8">(3)</a> <a href="#ref-for-dfn-annotation-object-9">(4)</a> <a href="#ref-for-dfn-annotation-object-10">(5)</a> 
  </li><li>
    <a href="#ref-for-dfn-annotation-object-11">6. Data Model</a> 
  </li><li>
    <a href="#ref-for-dfn-annotation-object-12">7. Grammar Extensions</a> <a href="#ref-for-dfn-annotation-object-13">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-annotation-object-14">8. Algorithmic Extensions</a> 
  </li><li>
    <a href="#ref-for-dfn-annotation-object-15">8.1 Expansion Algorithm</a> <a href="#ref-for-dfn-annotation-object-16">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-annotation-object-17">8.2 Compaction Algorithm</a> <a href="#ref-for-dfn-annotation-object-18">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-annotation-object-19">8.3 Flattening Algorithms</a> <a href="#ref-for-dfn-annotation-object-20">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-annotation-object-21">8.3.2 Node Map Generation</a> 
  </li><li>
    <a href="#ref-for-dfn-annotation-object-22">8.3.4 Create Annotations</a> <a href="#ref-for-dfn-annotation-object-23">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-annotation-object-24">8.4.1 Deserialize JSON-LD to RDF Algorithm</a> 
  </li>
  </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-embedded-node">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-embedded-node">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
    <li>
    <a href="#ref-for-dfn-embedded-node-1">1. Introduction</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-node-2">3. JSON-LD-star-specific Terms</a> <a href="#ref-for-dfn-embedded-node-3">(2)</a> <a href="#ref-for-dfn-embedded-node-4">(3)</a> <a href="#ref-for-dfn-embedded-node-5">(4)</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-node-6">4. Basic Concepts</a> <a href="#ref-for-dfn-embedded-node-7">(2)</a> <a href="#ref-for-dfn-embedded-node-8">(3)</a> <a href="#ref-for-dfn-embedded-node-9">(4)</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-node-10">5. Advanced Concepts</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-node-11">5.1 Reverse Properties</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-node-12">5.3 Mixing Annotations and Embedded Nodes</a> <a href="#ref-for-dfn-embedded-node-13">(2)</a> <a href="#ref-for-dfn-embedded-node-14">(3)</a> <a href="#ref-for-dfn-embedded-node-15">(4)</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-node-16">6. Data Model</a> <a href="#ref-for-dfn-embedded-node-17">(2)</a> <a href="#ref-for-dfn-embedded-node-18">(3)</a> <a href="#ref-for-dfn-embedded-node-19">(4)</a> <a href="#ref-for-dfn-embedded-node-20">(5)</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-node-21">7. Grammar Extensions</a> <a href="#ref-for-dfn-embedded-node-22">(2)</a> <a href="#ref-for-dfn-embedded-node-23">(3)</a> <a href="#ref-for-dfn-embedded-node-24">(4)</a> <a href="#ref-for-dfn-embedded-node-25">(5)</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-node-26">8. Algorithmic Extensions</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-node-27">8.1 Expansion Algorithm</a> <a href="#ref-for-dfn-embedded-node-28">(2)</a> <a href="#ref-for-dfn-embedded-node-29">(3)</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-node-30">8.2 Compaction Algorithm</a> <a href="#ref-for-dfn-embedded-node-31">(2)</a> <a href="#ref-for-dfn-embedded-node-32">(3)</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-node-33">8.3 Flattening Algorithms</a> <a href="#ref-for-dfn-embedded-node-34">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-node-35">8.3.2 Node Map Generation</a> <a href="#ref-for-dfn-embedded-node-36">(2)</a> <a href="#ref-for-dfn-embedded-node-37">(3)</a> <a href="#ref-for-dfn-embedded-node-38">(4)</a> <a href="#ref-for-dfn-embedded-node-39">(5)</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-node-40">8.3.4 Create Annotations</a> <a href="#ref-for-dfn-embedded-node-41">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-node-42">8.4.1 Deserialize JSON-LD to RDF Algorithm</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-node-43">8.4.2 Object to RDF Algorithm</a> <a href="#ref-for-dfn-embedded-node-44">(2)</a> <a href="#ref-for-dfn-embedded-node-45">(3)</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-node-46">8.4.3 Serialize RDF as JSON-LD Algorithm</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-node-47">8.4.4 RDF to Object Conversion</a> 
  </li>
  </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-embedded-triple">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-embedded-triple">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-json-ld-star-document">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-json-ld-star-document">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
    <li>
    <a href="#ref-for-dfn-json-ld-star-document-1">2. Conformance</a> 
  </li><li>
    <a href="#ref-for-dfn-json-ld-star-document-2">3. JSON-LD-star-specific Terms</a> 
  </li>
  </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-rdf-star-dataset">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-rdf-star-dataset">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-rdf-star-graph">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-rdf-star-graph">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" hidden="" id="dfn-panel-for-dfn-rdf-star-triple">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-rdf-star-triple">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><script id="respec-dfn-panel">(() => {
// @ts-check
if (document.respec) {
  document.respec.ready.then(dfnPanel);
} else {
  dfnPanel();
}

function dfnPanel() {
  /** @type {HTMLElement} */
  let panel;
  document.body.addEventListener("click", event => {
    if (!(event.target instanceof HTMLElement)) return;

    /** @type {HTMLElement} */
    const el = event.target;

    const action = deriveAction(el);
    switch (action) {
      case "show": {
        if (panel) hidePanel(panel);
        /** @type {HTMLElement} */
        const dfn = el.closest("dfn, .index-term");
        panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
        displayPanel(dfn, panel, { x: event.clientX, y: event.clientY });
        break;
      }
      case "dock": {
        panel.style.left = null;
        panel.style.top = null;
        panel.classList.add("docked");
        break;
      }
      case "hide": {
        hidePanel(panel);
        break;
      }
    }
  });
}

/** @param {HTMLElement} clickTarget */
function deriveAction(clickTarget) {
  const hitALink = !!clickTarget.closest("a");
  if (clickTarget.closest("dfn, .index-term")) {
    return hitALink ? null : "show";
  }
  if (clickTarget.closest(".dfn-panel")) {
    if (hitALink) {
      const clickedSelfLink = clickTarget.classList.contains("self-link");
      return clickedSelfLink ? "hide" : "dock";
    }
    const panel = clickTarget.closest(".dfn-panel");
    return panel.classList.contains("docked") ? "hide" : null;
  }
  if (document.querySelector(".dfn-panel:not([hidden])")) {
    return "hide";
  }
  return null;
}

/**
 * @param {HTMLElement} dfn
 * @param {HTMLElement} panel
 * @param {{ x: number, y: number }} clickPosition
 */
function displayPanel(dfn, panel, { x, y }) {
  panel.hidden = false;
  // distance (px) between edge of panel and the pointing triangle (caret)
  const MARGIN = 20;

  const dfnRects = dfn.getClientRects();
  // Find the `top` offset when the `dfn` can be spread across multiple lines
  let closestTop = 0;
  let minDiff = Infinity;
  for (const rect of dfnRects) {
    const { top, bottom } = rect;
    const diffFromClickY = Math.abs((top + bottom) / 2 - y);
    if (diffFromClickY < minDiff) {
      minDiff = diffFromClickY;
      closestTop = top;
    }
  }

  const top = window.scrollY + closestTop + dfnRects[0].height;
  const left = x - MARGIN;
  panel.style.left = `${left}px`;
  panel.style.top = `${top}px`;

  // Find if the panel is flowing out of the window
  const panelRect = panel.getBoundingClientRect();
  const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
  if (panelRect.right > SCREEN_WIDTH) {
    const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
    const newCaretOffset = left - newLeft;
    panel.style.left = `${newLeft}px`;
    /** @type {HTMLElement} */
    const caret = panel.querySelector(".caret");
    caret.style.left = `${newCaretOffset}px`;
  }
}

/** @param {HTMLElement} panel */
function hidePanel(panel) {
  panel.hidden = true;
  panel.classList.remove("docked");
}
})()</script><script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script></body></html>